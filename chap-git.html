<!DOCTYPE html>
<html lang="fr-FR">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Git et GitHub | Travailler avec R</title>
<meta name="author" content="Eric Marcon">
<meta name="description" content="Le contrôle de source consiste à enregistrer l’ensemble des modifications apportées sur les fichiers suivis. Les avantages sont nombreux : traçabilité et sécurité du projet, possibilité de...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="3 Git et GitHub | Travailler avec R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ericmarcon.github.io/travailleR/chap-git.html">
<meta property="og:description" content="Le contrôle de source consiste à enregistrer l’ensemble des modifications apportées sur les fichiers suivis. Les avantages sont nombreux : traçabilité et sécurité du projet, possibilité de...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Git et GitHub | Travailler avec R">
<meta name="twitter:description" content="Le contrôle de source consiste à enregistrer l’ensemble des modifications apportées sur les fichiers suivis. Les avantages sont nombreux : traçabilité et sécurité du projet, possibilité de...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.2/visNetwork.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-7NVD1TWMCJ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7NVD1TWMCJ');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
          margin-bottom: 0em;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Travailler avec R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Présentation</a></li>
<li><a class="" href="chap-logiciels.html"><span class="header-section-number">1</span> Logiciels</a></li>
<li><a class="" href="chap-utiliseR.html"><span class="header-section-number">2</span> Utiliser R</a></li>
<li><a class="active" href="chap-git.html"><span class="header-section-number">3</span> Git et GitHub</a></li>
<li><a class="" href="chap-rediger.html"><span class="header-section-number">4</span> Rédiger</a></li>
<li><a class="" href="chap-package.html"><span class="header-section-number">5</span> Package</a></li>
<li><a class="" href="chap-ci.html"><span class="header-section-number">6</span> Intégration continue</a></li>
<li><a class="" href="chap-shiny.html"><span class="header-section-number">7</span> Shiny</a></li>
<li><a class="" href="chap-enseigner.html"><span class="header-section-number">8</span> Enseigner avec R</a></li>
<li><a class="" href="chap-conclusion.html"><span class="header-section-number">9</span> Conclusion</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/EricMarcon/travailleR">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="chap-git" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Git et GitHub<a class="anchor" aria-label="anchor" href="#chap-git"><i class="fas fa-link"></i></a>
</h1>
<p>Le contrôle de source consiste à enregistrer l’ensemble des modifications apportées sur les fichiers suivis.
Les avantages sont nombreux : traçabilité et sécurité du projet, possibilité de collaborer efficacement, de revenir en arrière, de tenter de nouveaux développements sans mettre en péril la version stable…</p>
<div id="sec:principes-git" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Principes<a class="anchor" aria-label="anchor" href="#sec:principes-git"><i class="fas fa-link"></i></a>
</h2>
<div id="sec:git-cds" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> Contrôle de source<a class="anchor" aria-label="anchor" href="#sec:git-cds"><i class="fas fa-link"></i></a>
</h3>
<p>L’outil standard est aujourd’hui <em>git</em>.</p>
<p>Les commandes de git peuvent être exécutées dans le terminal de RStudio.</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Status"></span>
<img src="images/git-Status.png" alt="Capture d’écran du terminal de RStudio. La commande git status supposée décrire l’état du dépôt renvoie une erreur si le projet R n’est pas sous contrôle de source." width="80%"><p class="caption">
Figure 3.1: Capture d’écran du terminal de RStudio. La commande <code>git status</code> supposée décrire l’état du dépôt renvoie une erreur si le projet R n’est pas sous contrôle de source.
</p>
</div>
<p></p>
<p>La commande <code>git status</code> (figure <a href="chap-git.html#fig:git-Status">3.1</a>) retourne l’état du dépôt (<em>repository</em>), c’est-à-dire l’ensemble des données gérées par git pour suivre le projet en cours.</p>
<p>RStudio intègre une interface graphique pour git suffisante pour se passer de la ligne de commande dans le cadre d’une utilisation standard, présentée ici.</p>
</div>
<div id="git-et-github-1" class="section level3" number="3.1.2">
<h3>
<span class="header-section-number">3.1.2</span> git et GitHub<a class="anchor" aria-label="anchor" href="#git-et-github-1"><i class="fas fa-link"></i></a>
</h3>
<p><em>git</em> est le logiciel installé sur le poste de travail.</p>
<p><em>GitHub</em> est une plateforme, accessible par le web<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/" class="uri"&gt;https://github.com/&lt;/a&gt;&lt;/p&gt;'><sup>32</sup></a>, qui permet de partager le contenu des dépôts git (pour travailler à plusieurs) et de partager de la documentation sous la forme d’un site web (<em>GitHub Pages</em>).</p>
<p>Comme GitHub permet au minimum la sauvegarde des dépôts git, les deux sont toujours utilisés ensemble.
GitHub n’est pas la seule plateforme utilisable mais la principale.
Les alternatives sont Bitbucket<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://bitbucket.org/" class="uri"&gt;https://bitbucket.org/&lt;/a&gt;&lt;/p&gt;'><sup>33</sup></a> et GitLab<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://about.gitlab.com/" class="uri"&gt;https://about.gitlab.com/&lt;/a&gt;&lt;/p&gt;'><sup>34</sup></a> par exemple.</p>
</div>
</div>
<div id="sec:creerdepot" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Créer un nouveau dépôt<a class="anchor" aria-label="anchor" href="#sec:creerdepot"><i class="fas fa-link"></i></a>
</h2>
<div id="a-partir-dun-projet-existant" class="section level3" number="3.2.1">
<h3>
<span class="header-section-number">3.2.1</span> A partir d’un projet existant<a class="anchor" aria-label="anchor" href="#a-partir-dun-projet-existant"><i class="fas fa-link"></i></a>
</h3>
<p>Dans un projet R existant, activer le contrôle de source dans les options du projet (figure <a href="chap-git.html#fig:git-Project">3.2</a>).
La commande exécutée est <code>git init</code>.
Redémarrer RStudio à la demande.</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Project"></span>
<img src="images/git-Project.png" alt="Activation du contrôle de source dans le menu “Tools &gt; Project Options…”." width="80%"><p class="caption">
Figure 3.2: Activation du contrôle de source dans le menu “Tools &gt; Project Options…”.
</p>
</div>
<p></p>
<p>Une nouvelle fenêtre <em>Git</em> apparaît dans le panneau supérieur droit.
Elle contient la liste des fichiers du projet (figure <a href="chap-git.html#fig:git-Fichiers">3.3</a>).</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Fichiers"></span>
<img src="images/git-Fichiers.png" alt="Fichiers du projet, pas encore pris en compte par git." width="80%"><p class="caption">
Figure 3.3: Fichiers du projet, pas encore pris en compte par git.
</p>
</div>
<p></p>
<p>A ce stade, les fichiers ne sont pas pris en compte par git : leur statut est un double point d’interrogation jaune.
Pour git, le répertoire de travail local est un <em>bac à sable</em> où toutes les modifications sont possibles sans conséquences.</p>
<p>Le fichier <code>.gitignore</code> contient la liste des fichiers qui n’ont jamais vocation à être pris en compte, qu’il est donc inutile d’afficher dans la liste : les fichiers intermédiaires produits automatiquement par exemple.
La syntaxe des fichiers <code>.gitignore</code> est détaillée dans la documentation de git<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://git-scm.com/docs/gitignore" class="uri"&gt;https://git-scm.com/docs/gitignore&lt;/a&gt;&lt;/p&gt;'><sup>35</sup></a>.
En règle générale, utiliser un fichier existant : les modèles de documents notamment incluent leur fichier <code>.gitignore</code>.</p>
</div>
<div id="prendre-en-compte-des-fichiers" class="section level3" number="3.2.2">
<h3>
<span class="header-section-number">3.2.2</span> Prendre en compte des fichiers<a class="anchor" aria-label="anchor" href="#prendre-en-compte-des-fichiers"><i class="fas fa-link"></i></a>
</h3>
<p>Dans la fenêtre git, cocher la case <em>Staged</em> permet de prendre en compte (<em>Stage</em>) chaque fichier.
La commande exécutée est <code>git add &lt;NomDeFichier&gt;</code>.
Les fichiers pris en compte une première fois ont le statut “A” pour “Added”.</p>
<p>Les fichiers pris en compte font partie de l’<em>index</em> de git.</p>
</div>
<div id="valider-des-modifications" class="section level3" number="3.2.3">
<h3>
<span class="header-section-number">3.2.3</span> Valider des modifications<a class="anchor" aria-label="anchor" href="#valider-des-modifications"><i class="fas fa-link"></i></a>
</h3>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Commit"></span>
<img src="images/git-Commit.png" alt="Fenêtre de validation des modifications prises en compte." width="80%"><p class="caption">
Figure 3.4: Fenêtre de validation des modifications prises en compte.
</p>
</div>
<p></p>
<p>Les fichiers pris en compte peuvent être validés (<em>Commit</em>) en cliquant sur le bouton “Commit” dans la fenêtre <em>Git</em>.
Une nouvelle fenêtre s’ouvre (figure <a href="chap-git.html#fig:git-Commit">3.4</a>), qui permet de visualiser toutes les modifications par fichier (ajouts en verts, suppressions en rouge).
Le grain de modification traité par git est la ligne de texte, terminée par un retour à la ligne.
Les fichiers binaires comme les images sont traités en bloc.</p>
<p>Chaque validation (<em>Commit</em>) est accompagnée d’un texte de description.
La première ligne est la description courte.
Une description détaillée peut être ajoutée après un saut de ligne.
Pour la lisibilité de l’historique du projet, chaque <em>commit</em> correspond donc à une action, correspondant à la description courte : tous les fichiers modifiés ne sont pas forcément pris en compte et validés en une fois.
La commande exécutée est <code>git commit -m "Message de validation"</code>.</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-id"></span>
<img src="images/git-id.png" alt="Fenêtre de demande d’identification." width="80%"><p class="caption">
Figure 3.5: Fenêtre de demande d’identification.
</p>
</div>
<p></p>
<p>Les validations sont liées à leur auteur, qui doit être identifié par git.
En règle générale, git utilise les informations du système.
S’il n’y parvient pas, une fenêtre demande à l’utilisateur de s’identifier avant d’effectuer son premier <em>commit</em> (figure <a href="chap-git.html#fig:git-id">3.5</a>).
Les commandes indiquées sont à exécuter dans le terminal de RStudio.
Elles peuvent aussi être utilisées pour vérifier les valeurs connues par git :</p>
<pre><code>git config user.name
git config user.email</code></pre>
<p>Dès la première validation, la branche principale du dépôt, appelée “master”, est créée.
Une branche est une version du dépôt, avec son propre historique et donc ses propres fichiers.
Les branches permettent :</p>
<ul>
<li>de développer de nouvelles fonctionnalités dans un projet, sans perturber la branche principale qui peut contenir une version stable.
Si le développement est retenu, sa branche pourra être fusionnée avec la branche <em>master</em> pour constituer une nouvelle version stable.</li>
<li>de contenir des fichiers totalement différents de ceux de la branche principale, pour d’autres objectifs.
Sur GitHub, les pages web de présentation du projet peuvent être placés dans une branche appelée “gh-pages” qui ne sera jamais fusionnée.</li>
</ul>
<p>Le dépôt git est complètement constitué.
Dans le vocabulaire de git, il comprend trois <em>arbres</em> (figure <a href="chap-git.html#fig:git-Trees">3.6</a>) :</p>
<ul>
<li>le répertoire de travail, ou bac à sable, qui contient les fichiers non pris en compte : inconnus, modifiés, supprimés ou renommés (case <em>Staged</em> <span style="white-space:nowrap">décochée) ;</span>
</li>
<li>l’index, qui contient les fichiers pris en compte (case <em>Staged</em> <span style="white-space:nowrap">cochée) ;</span>
</li>
<li>la tête, qui contient les fichiers validés.</li>
</ul>
<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Trees"></span>
<img src="images/git-Trees.png" alt="Les trois arbres de git. Source : https://rogerdudler.github.io/git-guide/index.fr.html" width="80%"><p class="caption">
Figure 3.6: Les trois arbres de git. Source : <a href="https://rogerdudler.github.io/git-guide/index.fr.html" class="uri">https://rogerdudler.github.io/git-guide/index.fr.html</a>
</p>
</div>
<p></p>
<p>Le statut des fichiers est représenté par deux icônes dans la fenêtre <em>Git</em> de RStudio : deux points d’interrogation quand ils n’ont pas été pris en compte par git.
Ensuite, l’icône de droite décrit la différence entre le le répertoire de travail et l’index.
Celle de gauche décrit la différence entre l’index et la tête.
Un fichier modifié aura donc l’icône <code>M</code> affichée à droite avant d’être pris en compte, puis à gauche après prise en compte.
Il est possible, même s’il vaut mieux l’éviter, de modifier à nouveau un fichier pris en compte avant qu’il soit validé : alors, les deux icônes seront affichées.</p>
</div>
<div id="créer-un-dépôt-vide-sur-github" class="section level3" number="3.2.4">
<h3>
<span class="header-section-number">3.2.4</span> Créer un dépôt vide sur GitHub<a class="anchor" aria-label="anchor" href="#cr%C3%A9er-un-d%C3%A9p%C3%B4t-vide-sur-github"><i class="fas fa-link"></i></a>
</h3>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:CreateRepo"></span>
<img src="images/CreateRepo.png" alt="Création d’un dépôt sur GitHub." width="80%"><p class="caption">
Figure 3.7: Création d’un dépôt sur GitHub.
</p>
</div>
<p></p>
<p>Un dépôt vide sur GitHub doit être créé (figure <a href="chap-git.html#fig:CreateRepo">3.7</a>) :</p>
<ul>
<li>sur GitHub, cliquer sur le bouton vert “New repository”<span style="white-space:nowrap"> ;</span>
</li>
<li>saisir le nom du dépôt, identique à celui du projet R <span style="white-space:nowrap">local ;</span>
</li>
<li>ajouter une description, qui apparaîtra uniquement sur la page GitHub du <span style="white-space:nowrap">dépôt ;</span>
</li>
<li>choisir le statut du dépôt :
<ul>
<li>public : visible par tout le <span style="white-space:nowrap">monde ;</span>
</li>
<li>privé : visible seulement par les collaborateurs du projet, ce qui exclut de compléter par des pages web de présentation.</li>
</ul>
</li>
<li>ne pas ajouter de <code>README</code>, <code>.gitignore</code> ou licence : le projet doit être <span style="white-space:nowrap">vide ;</span>
</li>
<li>cliquer sur “create Repository”<span style="white-space:nowrap"> ;</span>
</li>
<li>copier l’adresse du dépôt (<a href="https://github.com/" class="uri">https://github.com/</a>… ou <a href="mailto:git@github.com" class="email">git@github.com</a>:…).</li>
</ul>
<p>Le choix de l’adresse est lié à la méthode d’authentification.
L’authentification SSH (voir section <a href="chap-logiciels.html#sec:SSH">1.4.3</a>) est à privilégier.</p>
</div>
<div id="lier-git-et-github" class="section level3" number="3.2.5">
<h3>
<span class="header-section-number">3.2.5</span> Lier git et GitHub<a class="anchor" aria-label="anchor" href="#lier-git-et-github"><i class="fas fa-link"></i></a>
</h3>
<p>Dans RStudio, un premier <em>commit</em> doit au moins avoir eu lieu pour que la branche principale du projet, nommée “master”, existe.
En haut à droite de la fenêtre <em>Git</em> (figure <a href="chap-git.html#fig:git-Fichiers">3.3</a>), il est affiché “(no branch)” avant cela.
Ensuite, il est affiché “master”, le nom par défaut de la branche principale du projet.
Le projet peut alors être lié au dépôt GitHub.</p>
<div id="méthode-graphique" class="section level4" number="3.2.5.1">
<h4>
<span class="header-section-number">3.2.5.1</span> Méthode graphique<a class="anchor" aria-label="anchor" href="#m%C3%A9thode-graphique"><i class="fas fa-link"></i></a>
</h4>
<p>Cliquer sur le bouton violet à côté de “master” : une fenêtre apparaît (habituellement utilisée pour la création d’une nouvelle branche, voir section <a href="chap-git.html#sec:branches">3.4</a>).
Saisir le nom de la branche “master”, cliquer sur “Add Remotes” et compléter :</p>
<ul>
<li>Remote Name : <code>origin</code><span style="white-space:nowrap"> ;</span>
</li>
<li>Remote URL : coller l’adresse du dépôt <span style="white-space:nowrap">GitHub ;</span>
</li>
<li>Cliquer sur “Add”.</li>
</ul>
<p>Cocher la case “Sync with Remote”.</p>
<p>Au message indiquant qu’une branche <em>master</em> existe déjà, cliquer sur “Overwrite”.</p>
</div>
<div id="en-ligne-de-commande" class="section level4" number="3.2.5.2">
<h4>
<span class="header-section-number">3.2.5.2</span> En ligne de commande<a class="anchor" aria-label="anchor" href="#en-ligne-de-commande"><i class="fas fa-link"></i></a>
</h4>
<p>Plutôt que la manipulation précédente, le lien entre Git et GitHub peut être mis en place par quelques commandes de git exécutées dans le terminal de RStudio.
Elles sont affichées sur la page d’accueil de tout dépôt vide nouvellement créé sur GitHub et peuvent donc être copiées et collées directement vers le terminal.</p>
<pre><code>git remote add origin git@github.com:GitHubID/NomDuDepot.git
git branch -M master
git push -u origin master</code></pre>
<p>La première commande déclare le dépôt GitHub comme dépôt distant.
Le nom <em>origin</em> est une convention de git.
Il peut être modifié mais l’organisation du projet sera plus lisible en respectant la convention.
L’adresse du dépôt est <code>https://github.com/GitHubID/NomDuDepot.git</code> si l’authentification HTTPS est choisie.</p>
<p>Les commandes suivantes activent la branche principale du projet et poussent son contenu vers GitHub.</p>
<p>Attention au nom de la branche principale (voir section <a href="chap-git.html#sec:branches">3.4</a>) : par défaut, elle s’appelle “master” dans un projet créé dans RStudio mais “main” sur GitHub.
Les lignes de commande ci-dessus fournies par GitHub remplacent donc <code>master</code> par <code>main</code> et doivent être corrigées pour correspondre au nom de la branche créée par RStudio.</p>
</div>
<div id="authentification" class="section level4" number="3.2.5.3">
<h4>
<span class="header-section-number">3.2.5.3</span> Authentification<a class="anchor" aria-label="anchor" href="#authentification"><i class="fas fa-link"></i></a>
</h4>
<p>Si l’authentification HTTPS est choisie, à la première connexion de RStudio à GitHub, une fenêtre permet de saisir ses identifiants GitHub (figure <a href="chap-git.html#fig:git-PAT">3.8</a>).</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-PAT"></span>
<img src="images/git-PAT.png" alt="Identification HTTPS sur GitHub." width="80%"><p class="caption">
Figure 3.8: Identification HTTPS sur GitHub.
</p>
</div>
<p></p>
<p>Depuis août 2021, GitHub n’accepte plus le mot de passe du compte de l’utilisateur pour cette authentification : le jeton personnel (PAT) créé en section <a href="chap-logiciels.html#sec:pat">1.4.4</a> doit être saisi à sa place.</p>
<p>Si l’authentification SSH est choisie et a été configurée à l’installation de git (section <a href="chap-logiciels.html#sec:SSH">1.4.3</a>), aucune action n’est nécessaire.</p>
</div>
</div>
<div id="pousser-les-premières-modifications" class="section level3" number="3.2.6">
<h3>
<span class="header-section-number">3.2.6</span> Pousser les premières modifications<a class="anchor" aria-label="anchor" href="#pousser-les-premi%C3%A8res-modifications"><i class="fas fa-link"></i></a>
</h3>
<p>La manipulation précédente a automatiquement poussé (<em>Push</em>) les modifications validées sur GitHub.
Par la suite, il faudra cliquer sur le bouton “Push” de la fenêtre <em>Git</em> pour le faire.</p>
<p>Sur GitHub, les fichiers résultant des modifications enregistrées par git sont maintenant visibles.</p>
<p>Chaque <em>commit</em> réalisé localement est compté par git et un message “Your branch is ahead of ‘origin/master’ by <em>n</em> commits” affiché dans en haut de la fenêtre <em>Git</em> indique qu’il est temps de mettre à jour GitHub en poussant l’ensemble de ces <em>commits</em>.
Cliquer sur le bouton “Push” pour le faire.</p>
<p>A ce stade, le projet doit disposer d’un fichier <code>README.md</code> qui présente son contenu sur GitHub.
Son contenu minimal est un titre et quelques lignes de description :</p>
<pre><code># Nom du Projet

Description en quelques lignes.
</code></pre>
<p>Il est conseillé d’utiliser des badges<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/orangemug/stability-badges" class="uri"&gt;https://github.com/orangemug/stability-badges&lt;/a&gt;&lt;/p&gt;'><sup>36</sup></a>, à placer juste après le titre, pour déclarer l’état de maturité du projet, par exemple :</p>
<pre><code>![stability-wip](https://img.shields.io/badge/|&gt;
stability-work_in_progress-lightgrey.svg)</code></pre>
</div>
<div id="cloner-un-dépôt-de-github" class="section level3" number="3.2.7">
<h3>
<span class="header-section-number">3.2.7</span> Cloner un dépôt de GitHub<a class="anchor" aria-label="anchor" href="#cloner-un-d%C3%A9p%C3%B4t-de-github"><i class="fas fa-link"></i></a>
</h3>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Clone"></span>
<img src="images/git-Clone.png" alt="Clonage d’un dépôt à partir de GitHub." width="80%"><p class="caption">
Figure 3.9: Clonage d’un dépôt à partir de <em>GitHub.</em>
</p>
</div>
<p></p>
<p>Tout dépôt sur GitHub peut être installé (on dit <em>cloné</em>) sur le poste de travail en copiant son adresse qui apparaît en cliquant sur le bouton vert (figure <a href="chap-git.html#fig:git-Clone">3.9</a>).</p>
<p>Dans RStudio, créer un nouveau projet et, dans l’assistant, choisir “Version Control”, “Git” et coller l’adresse dans le champ “Repository URL”.
Le nom répertoire à créer pour le projet est déduit automatiquement de l’adresse.
Choisir le répertoire dans lequel celui du projet va être créé et cliquer sur “Create Project”.
Le projet créé est lié au dépôt distant sur GitHub.</p>
<p>Pour travailler à plusieurs sur le même projet, le propriétaire du projet doit donner l’accès au projet à des collaborateurs (figure <a href="chap-git.html#fig:git-Access">3.10</a>), c’est-à-dire d’autres utilisateurs GitHub dans les réglages du dépôt (<em>Settings</em>).</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-Access"></span>
<img src="images/git-Access.png" alt="Attribution des droits d’accès sur GitHub." width="80%"><p class="caption">
Figure 3.10: Attribution des droits d’accès sur GitHub.
</p>
</div>
<p></p>
<p>Les collaborateurs sont invités par un message envoyé par <em>GitHub</em>.</p>
</div>
</div>
<div id="usage-courant" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Usage courant<a class="anchor" aria-label="anchor" href="#usage-courant"><i class="fas fa-link"></i></a>
</h2>
<div id="tirer-modifier-valider-pousser" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> Tirer, modifier, valider, pousser<a class="anchor" aria-label="anchor" href="#tirer-modifier-valider-pousser"><i class="fas fa-link"></i></a>
</h3>
<p>Toute séance de travail sur un projet commence en tirant (Bouton “Pull”) de la fenêtre <em>Git</em> pour intégrer au dépôt local les mises à jour effectuées sur GitHub par d’autres collaborateurs.</p>
<p>Les modifications apportées aux fichiers du projet sont ensuite prises en compte (cocher les cases <em>Staged</em>) et validées (<em>Commit</em>) avec un message explicatif.
Une bonne pratique consiste à valider les modifications à chaque fois qu’une tâche élémentaire, qui peut être décrite dans le message explicatif, est terminée plutôt que d’effectuer des <em>commits</em> regroupant de nombreux changements avec une description vague.</p>
<p>Dès que possible, pousser (<em>Push</em>) les mises à jour pour qu’elles soient visibles par les collaborateurs.</p>
</div>
<div id="régler-les-conflits" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> Régler les conflits<a class="anchor" aria-label="anchor" href="#r%C3%A9gler-les-conflits"><i class="fas fa-link"></i></a>
</h3>
<p>Il n’est pas possible de pousser les modifications validées si un collaborateur a modifié le dépôt distant sur GitHub.
Il faut alors les tirer pour les intégrer au dépôt local avant de pousser les modifications fusionnées.</p>
<p>Un conflit a lieu si un <em>Pull</em> importe dans le fichier local une modification qui ne peut pas être fusionnée automatiquement parce qu’une modification contradictoire a eu lieu localement.
Git considère chaque ligne comme un élément indivisible : la modification de la même ligne sur le dépôt distant et le dépôt local génère donc un conflit.</p>
<p>Git insère dans le fichier contenant un conflit les deux versions avec une présentation particulière :</p>
<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD # Version importée du conflit
Lignes en conflit, version importée
========= # limite entre les deux versions
Lignes en conflit, version locale
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; # Fin du conflit</code></pre>
<p>Les lignes de formatage contenant les <code>&lt;&lt;&lt;&lt;</code>, les <code>====</code> et les <code>&gt;&gt;&gt;&gt;</code> doivent être supprimés et une seule version des lignes problématiques conservée, qui peut être différente des deux versions originales.
La résolution du conflit doit être prise en compte et validée.</p>
<p>Pour limiter les conflits dans un document contenant du texte (typiquement, un document R Markdown), une bonne pratique consiste à traiter chaque phrase comme une ligne, terminée par un retour à la ligne qui ne sera pas visible dans le document mis en forme : un saut de ligne est nécessaire pour séparer les paragraphes.</p>
</div>
<div id="voir-les-différences" class="section level3" number="3.3.3">
<h3>
<span class="header-section-number">3.3.3</span> Voir les différences<a class="anchor" aria-label="anchor" href="#voir-les-diff%C3%A9rences"><i class="fas fa-link"></i></a>
</h3>
<p>Dans la fenêtre <em>Git</em> de RStudio, le menu contextuel (affiché par un clic droit) “Diff” peut être utilisé pour afficher les modifications apportées à chaque fichier (figure <a href="chap-git.html#fig:git-diff">3.11</a>).</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-diff"></span>
<img src="images/git-diff.png" alt="Différences entre le répertoire de travail et la tête." width="80%"><p class="caption">
Figure 3.11: Différences entre le répertoire de travail et la tête.
</p>
</div>
<p></p>
</div>
<div id="revenir-en-arrière" class="section level3" number="3.3.4">
<h3>
<span class="header-section-number">3.3.4</span> Revenir en arrière<a class="anchor" aria-label="anchor" href="#revenir-en-arri%C3%A8re"><i class="fas fa-link"></i></a>
</h3>
<p>Le menu contextuel “Revert” permet d’annuler toutes les modifications apportées à un fichier (affichées par <em>Diff</em>) et de rétablir son contenu validé la dernière fois (son état dans la tête).</p>
<p>Il n’est pas simple de revenir en arrière au-delà de la dernière validation parce que les modifications ont pu être prises en compte par des collaborateurs : leur suppression rendrait le projet incohérent.</p>
</div>
<div id="voir-lhistorique" class="section level3" number="3.3.5">
<h3>
<span class="header-section-number">3.3.5</span> Voir l’historique<a class="anchor" aria-label="anchor" href="#voir-lhistorique"><i class="fas fa-link"></i></a>
</h3>
<p>Le bouton en forme d’horloge de la fenêtre <em>Git</em> de RStudio affiche l’historique du projet (figure <a href="chap-git.html#fig:git-historique">3.12</a>).</p>

<p></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:git-historique"></span>
<img src="images/git-historique.png" alt="Historique des validations dans le dépôt." width="80%"><p class="caption">
Figure 3.12: Historique des validations dans le dépôt.
</p>
</div>
<p></p>
<p>En haut se trouve la tête, puis toutes les validations (<em>commits</em>) qui l’ont constituée.
Pour chaque validation, les différences de chaque fichier peuvent être affichées en cliquant sur le nom du fichier dans la partie basse de la fenêtre.</p>
</div>
</div>
<div id="sec:branches" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Branches<a class="anchor" aria-label="anchor" href="#sec:branches"><i class="fas fa-link"></i></a>
</h2>
<p>Les branches d’un projet sont des versions différentes mais simultanées.
Un usage typique est le développement d’une nouvelle fonctionnalité.
Si son écriture prend du temps, le projet est perturbé par le chantier en cours : le code peut ne plus fonctionner.
Si le développement s’avère impossible ou inutile, il faut pouvoir l’abandonner sans dommage.
Pour l’isoler pendant sa réalisation et se permettre de le valider ou de l’abandonner à la fin, il faut le placer dans une branche.</p>
<p>La branche principale du projet s’appelle “master” ou “main” à partir de novembre 2020<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/github/renaming" class="uri"&gt;https://github.com/github/renaming&lt;/a&gt;&lt;/p&gt;'><sup>37</sup></a>.
Elle doit toujours être dans un état stable : c’est elle qui est clonée à partir de GitHub par d’autres utilisateurs éventuels.</p>
<p>Le changement de convention pour le nom de la branche “master” fait qu’à partir de novembre 2020, les projets créés sur GitHub clonés dans RStudio ont pour branche principale “main” alors que les projets créés sur RStudio puis liés à GitHub conservent le nom “master”.</p>
<div id="créer-une-nouvelle-branche" class="section level3" number="3.4.1">
<h3>
<span class="header-section-number">3.4.1</span> Créer une nouvelle branche<a class="anchor" aria-label="anchor" href="#cr%C3%A9er-une-nouvelle-branche"><i class="fas fa-link"></i></a>
</h3>
<p>Cliquer sur le bouton violet “New Branch” dans la fenêtre <em>git</em> de RStudio.
Saisir son nom et cliquer sur “Create”.</p>
<p>La nouvelle branche est maintenant active.</p>
<p>Les commandes git peuvent aussi être exécutées dans le terminal (pour créer la branche et l’activer) :</p>
<pre><code>git branch new_branch
git checkout new_branch</code></pre>
</div>
<div id="changer-de-branche" class="section level3" number="3.4.2">
<h3>
<span class="header-section-number">3.4.2</span> Changer de branche<a class="anchor" aria-label="anchor" href="#changer-de-branche"><i class="fas fa-link"></i></a>
</h3>
<p>Sélectionner la branche à activer dans la liste des branches locales de la la fenêtre <em>git</em>.</p>
<p>Les <em>commits</em> s’appliquent à la branche active.
Chaque branche se comporte comme une version différente du projet.</p>
<p>Attention : pour éviter la confusion, sauvegarder les modifications, prendre en compte et valider les changements avant de changer de branche.</p>
</div>
<div id="pousser-la-nouvelle-branche" class="section level3" number="3.4.3">
<h3>
<span class="header-section-number">3.4.3</span> Pousser la nouvelle branche<a class="anchor" aria-label="anchor" href="#pousser-la-nouvelle-branche"><i class="fas fa-link"></i></a>
</h3>
<p>Les premières modifications de la nouvelle branche doivent être poussées en ligne de commande parce que les boutons “Push” et “Pull” de la fenêtre <em>Git</em> ne fonctionnent pas tant que la branche n’existe pas sur le dépôt distant.</p>
<p>Exécuter, dans le terminal :</p>
<pre><code>git push -u origin new_branch</code></pre>
</div>
<div id="comportement-du-système-de-fichier" class="section level3" number="3.4.4">
<h3>
<span class="header-section-number">3.4.4</span> Comportement du système de fichier<a class="anchor" aria-label="anchor" href="#comportement-du-syst%C3%A8me-de-fichier"><i class="fas fa-link"></i></a>
</h3>
<p>A chaque changement de branche, git réécrit les fichiers du projet pour qu’ils reflètent l’état de la branche.
Les changements peuvent être observés hors de RStudio, dans l’explorateur de fichier par exemple.</p>
<p>Les fichiers ignorés par <code>.gitignore</code> ne sont pas modifiés.
Il est donc indispensable que les fichiers <code>.gitignore</code> des différentes branches soit identiques, sinon des fichiers ignorés dans une branche apparaîtront comme ajoutés dans la branche affichée après un changement.</p>
<p>Les branches de développement ont un contenu proche de celui de la branche principale.
Ce n’est pas le cas de branches spécialisées vues plus loin, comme <code>gh-pages</code> (voir section <a href="chap-git.html#sec:github-pages">3.7</a>) qui contient le site web de présentation du dépôt.
Il est préférable de ne pas tenter d’afficher ces branches dans RStudio : leur contenu est produit automatiquement et ne doit pas être modifié manuellement.
Si c’est indispensable, il faudra y copier le fichier <code>.gitignore</code> de la branche principale et garder à l’esprit que les fichiers ignorés appartiennent en réalité à une autre branche que celle affichée.</p>
</div>
<div id="fusionner-avec-merge" class="section level3" number="3.4.5">
<h3>
<span class="header-section-number">3.4.5</span> Fusionner avec <code>merge</code><a class="anchor" aria-label="anchor" href="#fusionner-avec-merge"><i class="fas fa-link"></i></a>
</h3>
<p>La fusion d’une branche de développement avec la branche principale marque l’atteinte de son objectif : son code va être intégré au projet.
L’interface graphique de RStudio ne prévoit pas les fusions, il faut donc utiliser le terminal : tout d’abord, se placer dans la branche cible (possible avec l’interface graphique) :</p>
<pre><code>git checkout master</code></pre>
<p>Ensuite, fusionner :</p>
<pre><code>git merge new_branch</code></pre>
<p>Dans la majorité des situations, la fusion sera automatique (“Fast Forward”).
Il est possible que des conflits apparaissent : utiliser la commande <code>git status</code> pour afficher la liste des fichiers concernés, les ouvrir, régler le confit et effectuer un <em>commit</em>.</p>
<p>La branche fusionnée n’est pas supprimée : elles peut être utilisée à nouveau pour d’autres développements ou supprimée manuellement avec la commande suivante :</p>
<pre><code>git branch -d new_branch</code></pre>
</div>
<div id="fusionner-avec-une-requête-de-tirage" class="section level3" number="3.4.6">
<h3>
<span class="header-section-number">3.4.6</span> Fusionner avec une requête de tirage<a class="anchor" aria-label="anchor" href="#fusionner-avec-une-requ%C3%AAte-de-tirage"><i class="fas fa-link"></i></a>
</h3>
<p>L’autre façon de fusionner est plus formelle mais aussi plus générale : elle permet de fusionner une branche dans un dépôt d’un autre utilisateur pour y contribuer, ou de faire valider sa branche par un autre membre de l’équipe dans un projet collaboratif.</p>
<p>Pour contribuer au projet d’un autre utilisateur de GitHub<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://git-scm.com/book/fr/v2/GitHub-Contribution-%C3%A0-un-projet" class="uri"&gt;https://git-scm.com/book/fr/v2/GitHub-Contribution-%C3%A0-un-projet&lt;/a&gt;&lt;/p&gt;'><sup>38</sup></a>, il faut commencer par en créer un <em>fork</em>, c’est-à-dire une copie sous la forme d’un dépôt lié à l’original.
Il sera possible de tirer les modifications de l’original pour rester à jour<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://ardalis.com/syncing-a-fork-of-a-github-repository-with-upstream/" class="uri"&gt;https://ardalis.com/syncing-a-fork-of-a-github-repository-with-upstream/&lt;/a&gt;&lt;/p&gt;'><sup>39</sup></a> (par opposition à une simple copie instantanée possible en téléchargeant un Zip du projet) et, à la fin du développement, de fusionner le <em>fork</em> au dépôt original (par opposition à un clone qui ne permettrait pas de contribuer par la suite).</p>
<p>Ensuite, il faut créer une branche de développement comme précédemment, la modifier et finalement demander au propriétaire du dépôt de la fusionner.
Ce processus est décrit en détail dans la documentation de git .</p>
<p>Dans le cadre plus simple d’une branche de son propre projet comme dans le cas d’un <em>fork</em>, la branche de développement est prête à être fusionnée.
Elle doit avoir être poussée sur GitHub.
Sur la page GitHub du projet, un bouton “Create Pull Request” permet de demander la fusion.
Un message décrivant les modifications proposées avec leur argumentaire doit être ajouté.</p>
<p>Le propriétaire du projet (les membres de l’équipe dans le cadre d’un projet collaboratif, ou soi-même si l’équipe se réduit à une personne) est averti de la requête de tirage.
Sur la page du projet original, il est possible de voir le message, la liste des modifications (chronologie des <em>commits</em> ou comparaison des fichiers), d’engager un discussion avec l’auteur de la requête…
Si la requête n’est pas retenue, elle peut être fermée.
Si elle est validée, le bouton “Merge Pull Request” permet de fusionner la branche de développement avec la branche “master” (ou une autre) du projet source.</p>
<p>Les requêtes de tirage sont le seul moyen de contribuer à un dépôt sur lequel on ne dispose pas de droits d’écriture.
C’est aussi le moyen de fusionner une branche de développement dans sont propre projet en en gardant une trace explicite (dans la rubrique <em>Pull requests</em> de la page GitHub du projet).
Dans le cadre d’un projet collaboratif, les propositions d’un membre (auteur de la requête) peuvent être validées par un autre (qui accepte la fusion).</p>
</div>
</div>
<div id="usage-avancé" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Usage avancé<a class="anchor" aria-label="anchor" href="#usage-avanc%C3%A9"><i class="fas fa-link"></i></a>
</h2>
<div id="commandes-de-git" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> Commandes de git<a class="anchor" aria-label="anchor" href="#commandes-de-git"><i class="fas fa-link"></i></a>
</h3>
<p>Au-delà de l’usage courant permis par l’interface graphique de RStudio, des manipulations avancées des projets sont permises en utilisant git en ligne de commande.
Quelques exemples utiles sont présentés ici.</p>
<p>Un petit guide des commandes est proposé par Roger Dudler<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://rogerdudler.github.io/git-guide/index.fr.html" class="uri"&gt;https://rogerdudler.github.io/git-guide/index.fr.html&lt;/a&gt;&lt;/p&gt;'><sup>40</sup></a>.
Il résume les commandes essentielles, donc intégrées à l’interface graphique de RStudio.
Des liens vers des références plus complètes sont donnés en bas de la page.</p>
</div>
<div id="taille-dun-dépôt" class="section level3" number="3.5.2">
<h3>
<span class="header-section-number">3.5.2</span> Taille d’un dépôt<a class="anchor" aria-label="anchor" href="#taille-dun-d%C3%A9p%C3%B4t"><i class="fas fa-link"></i></a>
</h3>
<p>Pour connaître l’espace disque occupé par un dépôt, utiliser la commande <code>git count-objects -vH</code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://git-scm.com/docs/git-count-objects" class="uri"&gt;https://git-scm.com/docs/git-count-objects&lt;/a&gt;&lt;/p&gt;'><sup>41</sup></a>.</p>
<p>Les données pour ce document au stade de la rédaction sont présentées à titre d’exemple.</p>
<pre><code>$ git count-objects -v
count: 200
size: 2.66 MiB
in-pack: 0
packs: 0
size-pack: 0
prune-packable: 0
garbage: 0
size-garbage: 0</code></pre>
<p>La taille totale est sur la ligne <em>size</em>.
Les packs sont une méthode utilisée par git pour réduire la taille du dépôt : des fichiers similaires sont stockés sous la forme d’une partie commune et de différences.
La ligne <em>prune-packable</em> donne la taille d’objets stockés à la fois sous forme individuelle et dans des packs.
Si leur taille est importante, exécuter <code>git prune-packed</code> pour la ramener à zéro.</p>
<p>La ligne <em>size-garbage</em> donne la taille des objets qui peuvent être supprimés.
<code>git gc</code> les supprime, mais pas seulement : il optimise le stockage.</p>
<pre><code>$ git gc
Enumerating objects: 194, done.
Counting objects: 100% (194/194), done.
Delta compression using up to 8 threads
Compressing objects: 100% (188/188), done.
Writing objects: 100% (194/194), done.
Total 194 (delta 83), reused 0 (delta 0)

$ git count-objects -vH
count: 1
size: 5.72 KiB
in-pack: 194
packs: 1
size-pack: 4.00 MiB
prune-packable: 0
garbage: 0
size-garbage: 0 bytes</code></pre>
<p>Ici, la majorité des objets du dépôt a été placée dans un pack (mais sa taille est supérieure à celle des objets individuels).</p>
<p>Il est généralement inutile d’effectuer la collecte des déchets manuellement : git gère bien l’organisation de ses dépôts.</p>
<p>GitHub limite la taille des dépôts.
En mai 2020, la limite est de 100 Go.
La taille de tous les dépôts d’un utilisateur authentifié peut être affichée dans les réglages de son compte (“Personal Settings”, “Repositories”)<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/settings/repositories" class="uri"&gt;https://github.com/settings/repositories&lt;/a&gt;&lt;/p&gt;'><sup>42</sup></a>.</p>
</div>
<div id="supprimer-un-dossier" class="section level3" number="3.5.3">
<h3>
<span class="header-section-number">3.5.3</span> Supprimer un dossier<a class="anchor" aria-label="anchor" href="#supprimer-un-dossier"><i class="fas fa-link"></i></a>
</h3>
<p>Toutes les modifications apportées à un dépôt sont stockées dans son historique.
Il peut être utile d’en supprimer dans quelques cas particuliers :</p>
<ul>
<li>si un fichier contenant des informations confidentielles a été validé par mégarde.
La validation de sa suppression ne le retire pas de l’historique, et les informations confidentielles restent visibles en consultant l’historique.</li>
<li>si des fichiers volumineux ne sont plus nécessaires, par exemple des fichiers PDF produits par R Markdown (chapitre <a href="chap-rediger.html#chap-rediger">4</a>), binaires (donc inadaptés à git) et reproductibles à partir du code.</li>
</ul>
<p>Typiquement, le dossier <code>docs</code> est utilisé pour stocker les documents produits à partir de code R Markdown.
Les fichiers HTML et PDF doivent s’y trouver pour constituer les pages GitHub du projet.
Chaque modification du dépôt génère une nouvelle version de ces fichiers dont le volume de l’historique devient rapidement considérable.
Une solution efficace consiste à déléguer la création de ces fichiers à un système d’intégration continue (chapitre <a href="chap-ci.html#chap-ci">6</a>) et à retirer le dossier <code>docs</code> de la branche principale (<em>master</em>) du dépôt.
Il faut alors supprimer tout son historique pour récupérer la place qu’il occupe, qui peut être l’essentiel de la taille du dépôt.</p>
<p>Les commandes de suppression complète d’un dossier d’un dépôt son présentées ici<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/10067848/remove-folder-and-its-contents-from-git-githubs-history" class="uri"&gt;https://stackoverflow.com/questions/10067848/remove-folder-and-its-contents-from-git-githubs-history&lt;/a&gt;&lt;/p&gt;'><sup>43</sup></a>.
Le dépôt doit être propre, c’est-à-dire sans modifications non validées, et les versions distantes et locales synchronisées.</p>
<p>Les trois commandes suivantes suppriment complètement le dossier <code>docs</code> de l’historique du dépôt git :</p>
<pre><code>git filter-branch --tree-filter "rm -rf docs" |&gt;
    --prune-empty HEAD
git for-each-ref --format="%(refname)" refs/original/ |&gt;
    | xargs -n 1 git update-ref -d</code></pre>
<p>Le dossier n’est pas supprimé du répertoire de travail.
Il doit donc être ajouté au fichier <code>.gitignore</code> pour ne plus être suivi.
La modification de <code>.gitignore</code> doit être validée.
Ces opérations peuvent être réalisées avec l’interface de RStudio ou en ligne de commande :</p>
<pre><code>echo docs/ &gt;&gt; .gitignore
git add .gitignore
git commit -m 'Removing docs folder from git history'</code></pre>
<p>Le nettoyage du dépôt est nécessaire pour supprimer physiquement les données retirées :</p>
<pre><code>git gc</code></pre>
<p>Enfin, le dépôt doit être poussé.
L’option <code>--force</code> implique le remplacement du contenu du dépôt distant par celui du dépôt local : toutes les modifications faites par des collaborateurs sont effacées, c’est pourquoi cette opération de nettoyage implique l’arrêt complet du projet pendant qu’elle a lieu.</p>
<pre><code>git push origin master --force</code></pre>
<p>Ce code peut être utilisé pour supprimer totalement n’importe quel fichier ou dossier d’un dépôt en remplaçant simplement <code>docs</code> dans la commande <code>git filter-branch</code> initiale.
La réduction de la taille du dépôt peut être suivie en utilisant <code>git count-objects -vH</code> avant l’opération, avant <code>git gc</code> (la taille du dépôt reste stable mais a été déplacée vers <em>garbage</em>) et à la fin (la taille du dépôt est sensiblement réduite).</p>
</div>
<div id="revenir-en-arrière-1" class="section level3" number="3.5.4">
<h3>
<span class="header-section-number">3.5.4</span> Revenir en arrière<a class="anchor" aria-label="anchor" href="#revenir-en-arri%C3%A8re-1"><i class="fas fa-link"></i></a>
</h3>
<p>Il est possible de restaurer un dépôt dans un état précédent en plaçant sa tête (figure <a href="chap-git.html#fig:git-Trees">3.6</a>) au niveau d’un ancien <em>commit</em>.
Toutes les modifications ultérieures sont alors détruites.
Cette opération ne doit pas être réalisée sur un dépôt partagé : les autres utilisateurs ne pourraient plus pousser leurs modifications.</p>
<p>Afficher l’historique du dépôt et rechercher l’identifiant (SHA) du dernier <em>commit</em> à conserver.
Dans le terminal de RStudio, exécuter :</p>
<pre><code>git reset --hard &lt;SHA&gt;
git push -f</code></pre>
<p>Tout l’historique du dépôt après le point de restauration choisi est perdu.</p>
<p>Une méthode moins radicale et utilisable sur un dépôt partagé consiste à exécuter un <em>commit</em> qui annule les modifications d’un autre mais ne détruit aucune donnée de l’historique.
Cette opération n’annule qu’un seul <em>commit</em> à la fois et doit donc être répétée pour en annuler plusieurs, en commençant par le plus récent.
Dans le terminal de RStudio, exécuter :</p>
<pre><code>git revert &lt;SHA&gt;</code></pre>
<p>Pour annuler le dernier <em>commit</em>, exécuter :</p>
<pre><code>git revert HEAD</code></pre>
<p>Utiliser <code>HEAD</code> évite simplement de rechercher l’identifiant correspondant.</p>
</div>
</div>
<div id="sec:confidentiel" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Données confidentielles dans un dépôt public<a class="anchor" aria-label="anchor" href="#sec:confidentiel"><i class="fas fa-link"></i></a>
</h2>
<p>Un dépôt public sur GitHub pose problème quand des données utilisées dans le projet ne le sont pas.</p>
<p>Une solution peu satisfaisante consiste à ne pas inclure les données au projet, ce qui le rend non reproductible.
Une meilleure solution est de les crypter, en permettant à certains utilisateurs de les décrypter.
C’est l’objet du package <strong>secret</strong>.</p>
<p>Un coffre-fort (dossier <code>vault</code>) est créé dans le projet.
Il contient une liste d’utilisateurs autorisés : chacun d’entre eux doit disposer d’une paire de clés de cryptage, une clé publique incluse dans le coffre-fort et une clé privée, gardée secrète.
Les données sont cryptées avec toutes les clés publiques disponibles (et donc dupliquées).
Les utilisateurs utilisent ensuite chacun sa clé privée pour le décryptage.</p>
<p>Pour ne pas multiplier les copies des données, le propriétaire du dépôt a intérêt à créer un utilisateur générique pour le projet, dont il communiquera la clé privée hors de GitHub.
Le coffre contiendra les clés du propriétaire du projet et de l’utilisateur générique seulement.
En cas de compromission de la clé privée de l’utilisateur générique, il suffira de le retirer du coffre-fort et d’en créer un nouveau.</p>
<div id="génération-dune-paire-de-clés-pour-le-propriétaire-du-projet" class="section level3" number="3.6.1">
<h3>
<span class="header-section-number">3.6.1</span> Génération d’une paire de clés pour le propriétaire du projet<a class="anchor" aria-label="anchor" href="#g%C3%A9n%C3%A9ration-dune-paire-de-cl%C3%A9s-pour-le-propri%C3%A9taire-du-projet"><i class="fas fa-link"></i></a>
</h3>
<p>Les clés sont générées par le logiciel <em>ssh</em>, installé avec <em>git</em> ou par défaut sous Linux.</p>
<p>La procédure est identique à celle de la section <a href="chap-logiciels.html#sec:SSH">1.4.3</a>, mais la clé utilisée doit être au format RSA (pris en charge par le package <strong>secret</strong>, contrairement au format ed25519, plus sûr, utilisé pour l’authenfication sur GitHub).</p>
<p>Exécuter la commande suivante dans le terminal de RStudio pour créer une clé RSA :</p>
<pre><code>ssh-keygen -t rsa -b 4096 -C "user.email"</code></pre>
<p>Stocker la clé publique sur GitHub dans “Settings &gt; SSH and GPG Keys”.
Repérer la position de la clé : si une clé d’authentification a déjà été enregistrée pour deux postes de travail par exemple, la clé RSA sera la troisième.</p>
</div>
<div id="génération-dune-paire-de-clés-pour-le-projet" class="section level3" number="3.6.2">
<h3>
<span class="header-section-number">3.6.2</span> Génération d’une paire de clés pour le projet<a class="anchor" aria-label="anchor" href="#g%C3%A9n%C3%A9ration-dune-paire-de-cl%C3%A9s-pour-le-projet"><i class="fas fa-link"></i></a>
</h3>
<p>Générer une clé au format RSA dans le terminal de RStudio :</p>
<pre><code>ssh-keygen -t rsa -b 4096" </code></pre>
<ul>
<li>Entrer le nom de la clé : <code>&lt;RepoID&gt;.rsa</code>.</li>
<li>Ne pas saisir de phrase de validation (mot de passe) pour permettre l’utilisation de la clé sans interaction.</li>
</ul>
<p>La clé privée <code>&lt;RepoID&gt;.rsa</code> ne doit être diffusée qu’aux ayant-droits du projet.
Il faut donc ajouter la ligne <code>*.rsa</code> au fichier <code>.gitignore</code> du projet pour ne pas pousser la clé sur GitHub.</p>
<p>Pour permettre l’intégration continue du projet (chapitre <a href="chap-ci.html#chap-ci">6</a>), la clé privée doit être stockée comme un secret du dépôt GitHub contenant le projet.
Appliquer la procédure de la section <a href="chap-ci.html#sec:secrets-ci">6.2.2</a> pour créer un secret nommé “RSA” et coller le contenu du fichier <code>&lt;RepoID&gt;.rsa</code> dans le champ “Value” du formulaire.</p>
<p>L’utilisation du secret est décrite dans la section <a href="chap-ci.html#sec:confidentielCI">6.2.5</a>.</p>
</div>
<div id="création-dun-coffre-fort" class="section level3" number="3.6.3">
<h3>
<span class="header-section-number">3.6.3</span> Création d’un coffre-fort<a class="anchor" aria-label="anchor" href="#cr%C3%A9ation-dun-coffre-fort"><i class="fas fa-link"></i></a>
</h3>
<p>Exécuter :</p>
<p></p>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/gaborcsardi/secret#readme">"secret"</a></span><span class="op">)</span></span>
<span><span class="va">vault</span> <span class="op">&lt;-</span> <span class="st">"vault"</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/create_package_vault.html">create_vault</a></span><span class="op">(</span><span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<p></p>
</div>
<div id="ajout-des-utilisateurs" class="section level3" number="3.6.4">
<h3>
<span class="header-section-number">3.6.4</span> Ajout des utilisateurs<a class="anchor" aria-label="anchor" href="#ajout-des-utilisateurs"><i class="fas fa-link"></i></a>
</h3>
<p>Le propriétaire du projet est ajouté à partir de sa clé publique stockée sur GitHub, qui est la troisième dans notre exemple.</p>
<p></p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Identifiant GitHub du propriétaire du projet</span></span>
<span><span class="va">github_user</span> <span class="op">&lt;-</span> <span class="st">"EricMarcon"</span></span>
<span><span class="co"># Lecture et stockage de la clé, i est le numéro de la clé</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/add_github_user.html">add_github_user</a></span><span class="op">(</span><span class="va">github_user</span>, vault <span class="op">=</span> <span class="va">vault</span>, i <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p></p>
<p>La clé de l’utilisateur générique du projet est ajoutée par :</p>
<p></p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://jeroen.r-universe.dev/openssl">"openssl"</a></span><span class="op">)</span></span></code></pre></div>
<pre><code>## Linking to: OpenSSL 3.2.2 4 Jun 2024</code></pre>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">project_id</span> <span class="op">&lt;-</span> <span class="st">"NomDuProjet"</span></span>
<span><span class="co"># Lecture de la clé</span></span>
<span><span class="va">rsa_project</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/openssl/man/read_key.html">read_pubkey</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">project_id</span>, <span class="st">".rsa.pub"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Ajout au coffre-fort</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/add_user.html">add_user</a></span><span class="op">(</span><span class="va">project_id</span>, public_key <span class="op">=</span> <span class="va">rsa_project</span>, vault <span class="op">=</span> <span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<p></p>
</div>
<div id="stockage-des-données" class="section level3" number="3.6.5">
<h3>
<span class="header-section-number">3.6.5</span> Stockage des données<a class="anchor" aria-label="anchor" href="#stockage-des-donn%C3%A9es"><i class="fas fa-link"></i></a>
</h3>
<p>Les données, stockées dans des variables de R, sont stockées une à une par la fonction <code><a href="https://rdrr.io/pkg/secret/man/add_secret.html">add_secret()</a></code>.
Dans l’exemple suivant, la variable s’appelle <code>X</code> et vaut 1.</p>
<p></p>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/add_secret.html">add_secret</a></span><span class="op">(</span></span>
<span>  <span class="co"># Nom de la donnée</span></span>
<span>  <span class="st">"X"</span>, </span>
<span>  <span class="co"># Valeur</span></span>
<span>  value <span class="op">=</span> <span class="va">X</span>, </span>
<span>  <span class="co"># Utilisateurs autorisés: propriétaire et générique</span></span>
<span>  users <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"github-"</span>, <span class="va">github_user</span><span class="op">)</span>, <span class="va">project_id</span><span class="op">)</span>, </span>
<span>  <span class="co"># Coffre-fort</span></span>
<span>  vault <span class="op">=</span> <span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<p></p>
<p>Le contenu du coffre-fort peut être vérifié :</p>
<p></p>
<div class="sourceCode" id="cb265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Liste des données du coffre</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/list_secrets.html">list_secrets</a></span><span class="op">(</span>vault <span class="op">=</span> <span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   secret        email
## 1      X github-E....</code></pre>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Liste des propriétaire de la donnée 'X'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/list_owners.html">list_owners</a></span><span class="op">(</span><span class="st">"X"</span>, vault <span class="op">=</span> <span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "github-EricMarcon" "NomDuProjet"</code></pre>
<p></p>
<p>Les données seront lues dans le code du projet par la commande <code><a href="https://rdrr.io/pkg/secret/man/get_secret.html">get_secret()</a></code>.
La clé privée de l’utilisateur générique du projet, communiquée par un moyen sécurisé aux ayant-droits, doit se trouver dans le dossier du projet.</p>
<p></p>
<div class="sourceCode" id="cb269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sélection de la clé privée</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>USER_KEY <span class="op">=</span> <span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/proj_utils.html">proj_path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">project_id</span>, <span class="st">".rsa"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## ✔ Setting active project to
##   "/Users/runner/work/travailleR/travailleR".</code></pre>
<div class="sourceCode" id="cb271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lecture de la donnée 'X'</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/get_secret.html">get_secret</a></span><span class="op">(</span><span class="st">"X"</span>, vault <span class="op">=</span> <span class="va">vault</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p></p>
<p>La clé peut être vérifiée :</p>
<p></p>
<div class="sourceCode" id="cb273"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/secret/man/local_key.html">local_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [4096-bit rsa private key]
## md5: e81dcb0745a755286c2dc1fc4c6ad117
## sha256: cca11ef82e17c3b77b699e7f3c23e083e8f0f79cb70be8274799f076c44b0c2d</code></pre>
<p></p>
</div>
</div>
<div id="sec:github-pages" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Pages GitHub<a class="anchor" aria-label="anchor" href="#sec:github-pages"><i class="fas fa-link"></i></a>
</h2>
<p>Tout projet sur GitHub doit avoir contenir un fichier <code>README.md</code> pour le présenter.
Ce fichier est écrit au format Markdown.</p>
<p>Le fichier peut être placé dans le dossier <code>docs</code> pour fournir à fois la page d’accueil du dépôt et de son site web.
Le package <strong>memoiR</strong> fournit des commandes permettant d’automatiser ces tâches dans les projets de documents.
Un dépôt contenant un article écrit en R Markdown (voir section <a href="chap-rediger.html#sec:memo">4.3.2</a>) est utilisé comme exemple<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/EricMarcon/Krigeage" class="uri"&gt;https://github.com/EricMarcon/Krigeage&lt;/a&gt;&lt;/p&gt;'><sup>44</sup></a>.</p>
<p>Son fichier <code>README.md</code> existe aux deux emplacements : il est écrit par le développeur à la racine du projet et dupliqué dans <code>docs</code>.</p>
<div id="activation" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Activation<a class="anchor" aria-label="anchor" href="#activation"><i class="fas fa-link"></i></a>
</h3>
<p>Pour activer les pages GitHub, il faut ouvrir les propriétés du dépôt (<em>Settings</em>) et modifier la rubrique “GitHub Pages” (dans “Options”).
Sélectionner la branche du projet et le dossier contenant les pages web, ici : <code>master</code> et <code>/docs</code>.
En option, le choix d’un thème personnalise l’apparence des pages.</p>
<p>Le site web est accessible à une adresse<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://EricMarcon.github.io/Krigeage/" class="uri"&gt;https://EricMarcon.github.io/Krigeage/&lt;/a&gt;&lt;/p&gt;'><sup>45</sup></a> du domaine <em>github.io</em>.</p>
<p>Le fichier <code>README.md</code> affiché en page d’accueil a un aspect très différent mais le même contenu que celui affiché avec le code sur la page du dépôt dans GitHub.</p>
<p>L’intérêt des pages GitHub est de permettre un accès simple aux documents formatés quand le dépôt contient une production écrite et ou à la documentation des packages R.
Ces contenus seront présentés dans le chapitre suivant.</p>
<p>Un site web principal est proposé avec chaque compte GitHub, à l’adresse <a href="https://GitHubID.github.io" class="uri">https://GitHubID.github.io</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Exemple : &lt;a href="https://EricMarcon.github.io/Krigeage/" class="uri"&gt;https://EricMarcon.github.io/Krigeage/&lt;/a&gt;&lt;/p&gt;'><sup>46</sup></a>.
Il sera utilisé pour héberger un site web personnel produit par <strong>blogdown</strong>.</p>
</div>
<div id="badges" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Badges<a class="anchor" aria-label="anchor" href="#badges"><i class="fas fa-link"></i></a>
</h3>
<p>Les badges sont de petites images, éventuellement mises à jour dynamiquement, qui renseignent rapidement sur le statut d’un projet.
Ils doivent être placés immédiatement après le titre du fichier <code>README.md</code>.</p>
<p>Une bonne pratique consiste à indiquer l’avancement dans le cycle de vie du projet.
Les badges correspondants sont listés sur le site du Tidyverse<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://www.tidyverse.org/lifecycle/" class="uri"&gt;https://www.tidyverse.org/lifecycle/&lt;/a&gt;&lt;/p&gt;'><sup>47</sup></a>.</p>
<p>Leur code Markdown est le suivant :</p>
<pre><code>![stability-wip]
(https://img.shields.io/badge/lifecycle-maturing-blue.svg)</code></pre>
<p>Le package <strong>usethis</strong> simplifie leur création en plaçant le code nécessaire dans le presse-papier.
Il suffit ensuite de le coller dans le fichier.</p>
<p></p>
<div class="sourceCode" id="cb276"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/badges.html">use_lifecycle_badge</a></span><span class="op">(</span><span class="st">"maturing"</span><span class="op">)</span></span></code></pre></div>
<p></p>

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="chap-utiliseR.html"><span class="header-section-number">2</span> Utiliser R</a></div>
<div class="next"><a href="chap-rediger.html"><span class="header-section-number">4</span> Rédiger</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#chap-git"><span class="header-section-number">3</span> Git et GitHub</a></li>
<li>
<a class="nav-link" href="#sec:principes-git"><span class="header-section-number">3.1</span> Principes</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#sec:git-cds"><span class="header-section-number">3.1.1</span> Contrôle de source</a></li>
<li><a class="nav-link" href="#git-et-github-1"><span class="header-section-number">3.1.2</span> git et GitHub</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sec:creerdepot"><span class="header-section-number">3.2</span> Créer un nouveau dépôt</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#a-partir-dun-projet-existant"><span class="header-section-number">3.2.1</span> A partir d’un projet existant</a></li>
<li><a class="nav-link" href="#prendre-en-compte-des-fichiers"><span class="header-section-number">3.2.2</span> Prendre en compte des fichiers</a></li>
<li><a class="nav-link" href="#valider-des-modifications"><span class="header-section-number">3.2.3</span> Valider des modifications</a></li>
<li><a class="nav-link" href="#cr%C3%A9er-un-d%C3%A9p%C3%B4t-vide-sur-github"><span class="header-section-number">3.2.4</span> Créer un dépôt vide sur GitHub</a></li>
<li><a class="nav-link" href="#lier-git-et-github"><span class="header-section-number">3.2.5</span> Lier git et GitHub</a></li>
<li><a class="nav-link" href="#pousser-les-premi%C3%A8res-modifications"><span class="header-section-number">3.2.6</span> Pousser les premières modifications</a></li>
<li><a class="nav-link" href="#cloner-un-d%C3%A9p%C3%B4t-de-github"><span class="header-section-number">3.2.7</span> Cloner un dépôt de GitHub</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#usage-courant"><span class="header-section-number">3.3</span> Usage courant</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tirer-modifier-valider-pousser"><span class="header-section-number">3.3.1</span> Tirer, modifier, valider, pousser</a></li>
<li><a class="nav-link" href="#r%C3%A9gler-les-conflits"><span class="header-section-number">3.3.2</span> Régler les conflits</a></li>
<li><a class="nav-link" href="#voir-les-diff%C3%A9rences"><span class="header-section-number">3.3.3</span> Voir les différences</a></li>
<li><a class="nav-link" href="#revenir-en-arri%C3%A8re"><span class="header-section-number">3.3.4</span> Revenir en arrière</a></li>
<li><a class="nav-link" href="#voir-lhistorique"><span class="header-section-number">3.3.5</span> Voir l’historique</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sec:branches"><span class="header-section-number">3.4</span> Branches</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cr%C3%A9er-une-nouvelle-branche"><span class="header-section-number">3.4.1</span> Créer une nouvelle branche</a></li>
<li><a class="nav-link" href="#changer-de-branche"><span class="header-section-number">3.4.2</span> Changer de branche</a></li>
<li><a class="nav-link" href="#pousser-la-nouvelle-branche"><span class="header-section-number">3.4.3</span> Pousser la nouvelle branche</a></li>
<li><a class="nav-link" href="#comportement-du-syst%C3%A8me-de-fichier"><span class="header-section-number">3.4.4</span> Comportement du système de fichier</a></li>
<li><a class="nav-link" href="#fusionner-avec-merge"><span class="header-section-number">3.4.5</span> Fusionner avec merge</a></li>
<li><a class="nav-link" href="#fusionner-avec-une-requ%C3%AAte-de-tirage"><span class="header-section-number">3.4.6</span> Fusionner avec une requête de tirage</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#usage-avanc%C3%A9"><span class="header-section-number">3.5</span> Usage avancé</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#commandes-de-git"><span class="header-section-number">3.5.1</span> Commandes de git</a></li>
<li><a class="nav-link" href="#taille-dun-d%C3%A9p%C3%B4t"><span class="header-section-number">3.5.2</span> Taille d’un dépôt</a></li>
<li><a class="nav-link" href="#supprimer-un-dossier"><span class="header-section-number">3.5.3</span> Supprimer un dossier</a></li>
<li><a class="nav-link" href="#revenir-en-arri%C3%A8re-1"><span class="header-section-number">3.5.4</span> Revenir en arrière</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sec:confidentiel"><span class="header-section-number">3.6</span> Données confidentielles dans un dépôt public</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#g%C3%A9n%C3%A9ration-dune-paire-de-cl%C3%A9s-pour-le-propri%C3%A9taire-du-projet"><span class="header-section-number">3.6.1</span> Génération d’une paire de clés pour le propriétaire du projet</a></li>
<li><a class="nav-link" href="#g%C3%A9n%C3%A9ration-dune-paire-de-cl%C3%A9s-pour-le-projet"><span class="header-section-number">3.6.2</span> Génération d’une paire de clés pour le projet</a></li>
<li><a class="nav-link" href="#cr%C3%A9ation-dun-coffre-fort"><span class="header-section-number">3.6.3</span> Création d’un coffre-fort</a></li>
<li><a class="nav-link" href="#ajout-des-utilisateurs"><span class="header-section-number">3.6.4</span> Ajout des utilisateurs</a></li>
<li><a class="nav-link" href="#stockage-des-donn%C3%A9es"><span class="header-section-number">3.6.5</span> Stockage des données</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#sec:github-pages"><span class="header-section-number">3.7</span> Pages GitHub</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#activation"><span class="header-section-number">3.7.1</span> Activation</a></li>
<li><a class="nav-link" href="#badges"><span class="header-section-number">3.7.2</span> Badges</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/EricMarcon/travailleR/blob/master/03-Git.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/EricMarcon/travailleR/edit/master/03-Git.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Travailler avec R</strong>" was written by Eric Marcon. It was last built on 19/09/2024.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
