<!DOCTYPE html>
<html lang="fr-FR" xml:lang="fr-FR">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Package | Travailler avec R</title>
  <meta name="description" content="Organisation du travail autour de R et RStudio" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Package | Travailler avec R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ericmarcon.github.io/travailleR/" />
  
  <meta property="og:description" content="Organisation du travail autour de R et RStudio" />
  <meta name="github-repo" content="EricMarcon/travailleR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Package | Travailler avec R" />
  
  <meta name="twitter:description" content="Organisation du travail autour de R et RStudio" />
  

<meta name="author" content="Eric Marcon" />


<meta name="date" content="2021-05-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-rediger.html"/>
<link rel="next" href="chap-ci.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7NVD1TWMCJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7NVD1TWMCJ');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Travailler avec R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Présentation</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectifs"><i class="fa fa-check"></i>Objectifs</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap-logiciels.html"><a href="chap-logiciels.html"><i class="fa fa-check"></i><b>1</b> Logiciels</a><ul>
<li class="chapter" data-level="1.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#r"><i class="fa fa-check"></i><b>1.1</b> R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation"><i class="fa fa-check"></i><b>1.1.1</b> Installation</a></li>
<li class="chapter" data-level="1.1.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#rtools"><i class="fa fa-check"></i><b>1.1.2</b> Rtools</a></li>
<li class="chapter" data-level="1.1.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#mise-à-jour"><i class="fa fa-check"></i><b>1.1.3</b> Mise à jour</a></li>
<li class="chapter" data-level="1.1.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:librairies"><i class="fa fa-check"></i><b>1.1.4</b> Librairies</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-1"><i class="fa fa-check"></i><b>1.2.1</b> Installation</a></li>
<li class="chapter" data-level="1.2.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#encodage-des-fichiers"><i class="fa fa-check"></i><b>1.2.2</b> Encodage des fichiers</a></li>
<li class="chapter" data-level="1.2.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#dossier-de-travail"><i class="fa fa-check"></i><b>1.2.3</b> Dossier de travail</a></li>
<li class="chapter" data-level="1.2.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:solution-dossiers"><i class="fa fa-check"></i><b>1.2.4</b> Solution retenue</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#packages"><i class="fa fa-check"></i><b>1.3</b> Packages</a><ul>
<li class="chapter" data-level="1.3.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-depuis-cran"><i class="fa fa-check"></i><b>1.3.1</b> Installation depuis CRAN</a></li>
<li class="chapter" data-level="1.3.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-depuis-github"><i class="fa fa-check"></i><b>1.3.2</b> Installation depuis GitHub</a></li>
<li class="chapter" data-level="1.3.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-depuis-bioconductor"><i class="fa fa-check"></i><b>1.3.3</b> Installation depuis Bioconductor</a></li>
<li class="chapter" data-level="1.3.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#solution-retenue"><i class="fa fa-check"></i><b>1.3.4</b> Solution retenue</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#git-et-github"><i class="fa fa-check"></i><b>1.4</b> git et GitHub</a><ul>
<li class="chapter" data-level="1.4.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#git"><i class="fa fa-check"></i><b>1.4.1</b> git</a></li>
<li class="chapter" data-level="1.4.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#github"><i class="fa fa-check"></i><b>1.4.2</b> GitHub</a></li>
<li class="chapter" data-level="1.4.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:SSH"><i class="fa fa-check"></i><b>1.4.3</b> Authenthification SSH</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="chap-logiciels.html"><a href="chap-logiciels.html#miktex"><i class="fa fa-check"></i><b>1.5</b> MiKTeX</a><ul>
<li class="chapter" data-level="1.5.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-2"><i class="fa fa-check"></i><b>1.5.1</b> Installation</a></li>
<li class="chapter" data-level="1.5.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#mises-à-jour"><i class="fa fa-check"></i><b>1.5.2</b> Mises à jour</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="chap-logiciels.html"><a href="chap-logiciels.html#go"><i class="fa fa-check"></i><b>1.6</b> Go</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html"><i class="fa fa-check"></i><b>2</b> Utiliser R</a><ul>
<li class="chapter" data-level="2.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#les-langages-de-r"><i class="fa fa-check"></i><b>2.1</b> Les langages de R</a><ul>
<li class="chapter" data-level="2.1.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#base"><i class="fa fa-check"></i><b>2.1.1</b> Base</a></li>
<li class="chapter" data-level="2.1.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:S3"><i class="fa fa-check"></i><b>2.1.2</b> S3</a></li>
<li class="chapter" data-level="2.1.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#s4"><i class="fa fa-check"></i><b>2.1.3</b> S4</a></li>
<li class="chapter" data-level="2.1.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rc"><i class="fa fa-check"></i><b>2.1.4</b> RC</a></li>
<li class="chapter" data-level="2.1.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#s6"><i class="fa fa-check"></i><b>2.1.5</b> S6</a></li>
<li class="chapter" data-level="2.1.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#tidyverse"><i class="fa fa-check"></i><b>2.1.6</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:environnements"><i class="fa fa-check"></i><b>2.2</b> Environnements</a><ul>
<li class="chapter" data-level="2.2.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#organisation"><i class="fa fa-check"></i><b>2.2.1</b> Organisation</a></li>
<li class="chapter" data-level="2.2.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#recherche"><i class="fa fa-check"></i><b>2.2.2</b> Recherche</a></li>
<li class="chapter" data-level="2.2.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#espaces-de-nom-des-packages"><i class="fa fa-check"></i><b>2.2.3</b> Espaces de nom des packages</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#mesure-du-temps-dexécution"><i class="fa fa-check"></i><b>2.3</b> Mesure du temps d’exécution</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#system.time"><i class="fa fa-check"></i><b>2.3.1</b> system.time</a></li>
<li class="chapter" data-level="2.3.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#microbenchmark"><i class="fa fa-check"></i><b>2.3.2</b> microbenchmark</a></li>
<li class="chapter" data-level="2.3.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#profilage"><i class="fa fa-check"></i><b>2.3.3</b> Profilage</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#boucles"><i class="fa fa-check"></i><b>2.4</b> Boucles</a><ul>
<li class="chapter" data-level="2.4.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#fonctions-vectorielles"><i class="fa fa-check"></i><b>2.4.1</b> Fonctions vectorielles</a></li>
<li class="chapter" data-level="2.4.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#lapply"><i class="fa fa-check"></i><b>2.4.2</b> lapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#boucles-for"><i class="fa fa-check"></i><b>2.4.3</b> Boucles for</a></li>
<li class="chapter" data-level="2.4.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#replicate"><i class="fa fa-check"></i><b>2.4.4</b> replicate</a></li>
<li class="chapter" data-level="2.4.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#vectorize"><i class="fa fa-check"></i><b>2.4.5</b> Vectorize</a></li>
<li class="chapter" data-level="2.4.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#statistiques-marginales"><i class="fa fa-check"></i><b>2.4.6</b> Statistiques marginales</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:cpp"><i class="fa fa-check"></i><b>2.5</b> Code C++</a></li>
<li class="chapter" data-level="2.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#paralléliser-r"><i class="fa fa-check"></i><b>2.6</b> Paralléliser R</a><ul>
<li class="chapter" data-level="2.6.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#mclapply-fork"><i class="fa fa-check"></i><b>2.6.1</b> mclapply (fork)</a></li>
<li class="chapter" data-level="2.6.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#parlapply-socket"><i class="fa fa-check"></i><b>2.6.2</b> parLapply (socket)</a></li>
<li class="chapter" data-level="2.6.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#foreach"><i class="fa fa-check"></i><b>2.6.3</b> foreach</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:cas"><i class="fa fa-check"></i><b>2.7</b> Etude de cas</a><ul>
<li class="chapter" data-level="2.7.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#création-des-données"><i class="fa fa-check"></i><b>2.7.1</b> Création des données</a></li>
<li class="chapter" data-level="2.7.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#spatstat"><i class="fa fa-check"></i><b>2.7.2</b> Spatstat</a></li>
<li class="chapter" data-level="2.7.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#apply"><i class="fa fa-check"></i><b>2.7.3</b> apply</a></li>
<li class="chapter" data-level="2.7.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#boucle-for"><i class="fa fa-check"></i><b>2.7.4</b> boucle for</a></li>
<li class="chapter" data-level="2.7.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#boucle-foreach"><i class="fa fa-check"></i><b>2.7.5</b> boucle foreach</a></li>
<li class="chapter" data-level="2.7.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rcpp"><i class="fa fa-check"></i><b>2.7.6</b> RCpp</a></li>
<li class="chapter" data-level="2.7.7" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rcppparallel"><i class="fa fa-check"></i><b>2.7.7</b> RcppParallel</a></li>
<li class="chapter" data-level="2.7.8" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#conclusions-sur-loptimisation-de-la-vitesse-du-code"><i class="fa fa-check"></i><b>2.7.8</b> Conclusions sur l’optimisation de la vitesse du code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-git.html"><a href="chap-git.html"><i class="fa fa-check"></i><b>3</b> Git et GitHub</a><ul>
<li class="chapter" data-level="3.1" data-path="chap-git.html"><a href="chap-git.html#sec:principes-git"><i class="fa fa-check"></i><b>3.1</b> Principes</a><ul>
<li class="chapter" data-level="3.1.1" data-path="chap-git.html"><a href="chap-git.html#sec:git-cds"><i class="fa fa-check"></i><b>3.1.1</b> Contrôle de source</a></li>
<li class="chapter" data-level="3.1.2" data-path="chap-git.html"><a href="chap-git.html#git-et-github-1"><i class="fa fa-check"></i><b>3.1.2</b> git et GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="chap-git.html"><a href="chap-git.html#sec:creerdepot"><i class="fa fa-check"></i><b>3.2</b> Créer un nouveau dépôt</a><ul>
<li class="chapter" data-level="3.2.1" data-path="chap-git.html"><a href="chap-git.html#a-partir-dun-projet-existant"><i class="fa fa-check"></i><b>3.2.1</b> A partir d’un projet existant</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-git.html"><a href="chap-git.html#prendre-en-compte-des-fichiers"><i class="fa fa-check"></i><b>3.2.2</b> Prendre en compte des fichiers</a></li>
<li class="chapter" data-level="3.2.3" data-path="chap-git.html"><a href="chap-git.html#valider-des-modifications"><i class="fa fa-check"></i><b>3.2.3</b> Valider des modifications</a></li>
<li class="chapter" data-level="3.2.4" data-path="chap-git.html"><a href="chap-git.html#créer-un-dépôt-vide-sur-github"><i class="fa fa-check"></i><b>3.2.4</b> Créer un dépôt vide sur GitHub</a></li>
<li class="chapter" data-level="3.2.5" data-path="chap-git.html"><a href="chap-git.html#lier-git-et-github"><i class="fa fa-check"></i><b>3.2.5</b> Lier git et GitHub</a></li>
<li class="chapter" data-level="3.2.6" data-path="chap-git.html"><a href="chap-git.html#pousser-les-premières-modifications"><i class="fa fa-check"></i><b>3.2.6</b> Pousser les premières modifications</a></li>
<li class="chapter" data-level="3.2.7" data-path="chap-git.html"><a href="chap-git.html#cloner-un-dépôt-de-github"><i class="fa fa-check"></i><b>3.2.7</b> Cloner un dépôt de GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chap-git.html"><a href="chap-git.html#usage-courant"><i class="fa fa-check"></i><b>3.3</b> Usage courant</a><ul>
<li class="chapter" data-level="3.3.1" data-path="chap-git.html"><a href="chap-git.html#tirer-modifier-valider-pousser"><i class="fa fa-check"></i><b>3.3.1</b> Tirer, modifier, valider, pousser</a></li>
<li class="chapter" data-level="3.3.2" data-path="chap-git.html"><a href="chap-git.html#régler-les-conflits"><i class="fa fa-check"></i><b>3.3.2</b> Régler les conflits</a></li>
<li class="chapter" data-level="3.3.3" data-path="chap-git.html"><a href="chap-git.html#voir-les-différences"><i class="fa fa-check"></i><b>3.3.3</b> Voir les différences</a></li>
<li class="chapter" data-level="3.3.4" data-path="chap-git.html"><a href="chap-git.html#revenir-en-arrière"><i class="fa fa-check"></i><b>3.3.4</b> Revenir en arrière</a></li>
<li class="chapter" data-level="3.3.5" data-path="chap-git.html"><a href="chap-git.html#voir-lhistorique"><i class="fa fa-check"></i><b>3.3.5</b> Voir l’historique</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="chap-git.html"><a href="chap-git.html#sec:branches"><i class="fa fa-check"></i><b>3.4</b> Branches</a><ul>
<li class="chapter" data-level="3.4.1" data-path="chap-git.html"><a href="chap-git.html#créer-une-nouvelle-branche"><i class="fa fa-check"></i><b>3.4.1</b> Créer une nouvelle branche</a></li>
<li class="chapter" data-level="3.4.2" data-path="chap-git.html"><a href="chap-git.html#changer-de-branche"><i class="fa fa-check"></i><b>3.4.2</b> Changer de branche</a></li>
<li class="chapter" data-level="3.4.3" data-path="chap-git.html"><a href="chap-git.html#pousser-la-nouvelle-branche"><i class="fa fa-check"></i><b>3.4.3</b> Pousser la nouvelle branche</a></li>
<li class="chapter" data-level="3.4.4" data-path="chap-git.html"><a href="chap-git.html#comportement-du-système-de-fichier"><i class="fa fa-check"></i><b>3.4.4</b> Comportement du système de fichier</a></li>
<li class="chapter" data-level="3.4.5" data-path="chap-git.html"><a href="chap-git.html#fusionner-avec-merge"><i class="fa fa-check"></i><b>3.4.5</b> Fusionner avec <code>merge</code></a></li>
<li class="chapter" data-level="3.4.6" data-path="chap-git.html"><a href="chap-git.html#fusionner-avec-une-requête-de-tirage"><i class="fa fa-check"></i><b>3.4.6</b> Fusionner avec une requête de tirage</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chap-git.html"><a href="chap-git.html#usage-avancé"><i class="fa fa-check"></i><b>3.5</b> Usage avancé</a><ul>
<li class="chapter" data-level="3.5.1" data-path="chap-git.html"><a href="chap-git.html#commandes-de-git"><i class="fa fa-check"></i><b>3.5.1</b> Commandes de git</a></li>
<li class="chapter" data-level="3.5.2" data-path="chap-git.html"><a href="chap-git.html#taille-dun-dépôt"><i class="fa fa-check"></i><b>3.5.2</b> Taille d’un dépôt</a></li>
<li class="chapter" data-level="3.5.3" data-path="chap-git.html"><a href="chap-git.html#supprimer-un-dossier"><i class="fa fa-check"></i><b>3.5.3</b> Supprimer un dossier</a></li>
<li class="chapter" data-level="3.5.4" data-path="chap-git.html"><a href="chap-git.html#revenir-en-arrière-1"><i class="fa fa-check"></i><b>3.5.4</b> Revenir en arrière</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chap-git.html"><a href="chap-git.html#sec:github-pages"><i class="fa fa-check"></i><b>3.6</b> Pages GitHub</a><ul>
<li class="chapter" data-level="3.6.1" data-path="chap-git.html"><a href="chap-git.html#activation"><i class="fa fa-check"></i><b>3.6.1</b> Activation</a></li>
<li class="chapter" data-level="3.6.2" data-path="chap-git.html"><a href="chap-git.html#badges"><i class="fa fa-check"></i><b>3.6.2</b> Badges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-rediger.html"><a href="chap-rediger.html"><i class="fa fa-check"></i><b>4</b> Rédiger</a><ul>
<li class="chapter" data-level="4.1" data-path="chap-rediger.html"><a href="chap-rediger.html#bloc-note-markdown-r-notebook"><i class="fa fa-check"></i><b>4.1</b> Bloc-note Markdown (R Notebook)</a></li>
<li class="chapter" data-level="4.2" data-path="chap-rediger.html"><a href="chap-rediger.html#modèles-r-markdown"><i class="fa fa-check"></i><b>4.2</b> Modèles R Markdown</a></li>
<li class="chapter" data-level="4.3" data-path="chap-rediger.html"><a href="chap-rediger.html#articles-avec-bookdown"><i class="fa fa-check"></i><b>4.3</b> Articles avec bookdown</a><ul>
<li class="chapter" data-level="4.3.1" data-path="chap-rediger.html"><a href="chap-rediger.html#ecrire"><i class="fa fa-check"></i><b>4.3.1</b> Ecrire</a></li>
<li class="chapter" data-level="4.3.2" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:memo"><i class="fa fa-check"></i><b>4.3.2</b> Modèle Simple Article</a></li>
<li class="chapter" data-level="4.3.3" data-path="chap-rediger.html"><a href="chap-rediger.html#autres-modèles"><i class="fa fa-check"></i><b>4.3.3</b> Autres modèles</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="chap-rediger.html"><a href="chap-rediger.html#présentation-beamer"><i class="fa fa-check"></i><b>4.4</b> Présentation Beamer</a></li>
<li class="chapter" data-level="4.5" data-path="chap-rediger.html"><a href="chap-rediger.html#memoir"><i class="fa fa-check"></i><b>4.5</b> memoir</a><ul>
<li class="chapter" data-level="4.5.1" data-path="chap-rediger.html"><a href="chap-rediger.html#créer-1"><i class="fa fa-check"></i><b>4.5.1</b> Créer</a></li>
<li class="chapter" data-level="4.5.2" data-path="chap-rediger.html"><a href="chap-rediger.html#ecrire-2"><i class="fa fa-check"></i><b>4.5.2</b> Ecrire</a></li>
<li class="chapter" data-level="4.5.3" data-path="chap-rediger.html"><a href="chap-rediger.html#tricoter-1"><i class="fa fa-check"></i><b>4.5.3</b> Tricoter</a></li>
<li class="chapter" data-level="4.5.4" data-path="chap-rediger.html"><a href="chap-rediger.html#finitions"><i class="fa fa-check"></i><b>4.5.4</b> Finitions</a></li>
<li class="chapter" data-level="4.5.5" data-path="chap-rediger.html"><a href="chap-rediger.html#site-gitbook"><i class="fa fa-check"></i><b>4.5.5</b> Site gitbook</a></li>
<li class="chapter" data-level="4.5.6" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:rediger-ouvrage-ci"><i class="fa fa-check"></i><b>4.5.6</b> Intégration continue</a></li>
<li class="chapter" data-level="4.5.7" data-path="chap-rediger.html"><a href="chap-rediger.html#google-analytics"><i class="fa fa-check"></i><b>4.5.7</b> Google Analytics</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="chap-rediger.html"><a href="chap-rediger.html#site-web-r-markdown"><i class="fa fa-check"></i><b>4.6</b> Site web R Markdown</a><ul>
<li class="chapter" data-level="4.6.1" data-path="chap-rediger.html"><a href="chap-rediger.html#modèle"><i class="fa fa-check"></i><b>4.6.1</b> Modèle</a></li>
<li class="chapter" data-level="4.6.2" data-path="chap-rediger.html"><a href="chap-rediger.html#améliorations"><i class="fa fa-check"></i><b>4.6.2</b> Améliorations</a></li>
<li class="chapter" data-level="4.6.3" data-path="chap-rediger.html"><a href="chap-rediger.html#contôle-de-source"><i class="fa fa-check"></i><b>4.6.3</b> Contôle de source</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:blogdown"><i class="fa fa-check"></i><b>4.7</b> Site web personnel : blogdown</a><ul>
<li class="chapter" data-level="4.7.1" data-path="chap-rediger.html"><a href="chap-rediger.html#installation-des-outils"><i class="fa fa-check"></i><b>4.7.1</b> Installation des outils</a></li>
<li class="chapter" data-level="4.7.2" data-path="chap-rediger.html"><a href="chap-rediger.html#créer-2"><i class="fa fa-check"></i><b>4.7.2</b> Créer</a></li>
<li class="chapter" data-level="4.7.3" data-path="chap-rediger.html"><a href="chap-rediger.html#site-personnel-sur-github"><i class="fa fa-check"></i><b>4.7.3</b> Site personnel sur GitHub</a></li>
<li class="chapter" data-level="4.7.4" data-path="chap-rediger.html"><a href="chap-rediger.html#construction-du-site"><i class="fa fa-check"></i><b>4.7.4</b> Construction du site</a></li>
<li class="chapter" data-level="4.7.5" data-path="chap-rediger.html"><a href="chap-rediger.html#site-multilingue"><i class="fa fa-check"></i><b>4.7.5</b> Site multilingue</a></li>
<li class="chapter" data-level="4.7.6" data-path="chap-rediger.html"><a href="chap-rediger.html#paramétrer"><i class="fa fa-check"></i><b>4.7.6</b> Paramétrer</a></li>
<li class="chapter" data-level="4.7.7" data-path="chap-rediger.html"><a href="chap-rediger.html#ecrire-3"><i class="fa fa-check"></i><b>4.7.7</b> Ecrire</a></li>
<li class="chapter" data-level="4.7.8" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:rediger-web-ci"><i class="fa fa-check"></i><b>4.7.8</b> Intégration continue</a></li>
<li class="chapter" data-level="4.7.9" data-path="chap-rediger.html"><a href="chap-rediger.html#mises-à-jour-1"><i class="fa fa-check"></i><b>4.7.9</b> Mises à jour</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="chap-rediger.html"><a href="chap-rediger.html#exportation-de-figures"><i class="fa fa-check"></i><b>4.8</b> Exportation de figures</a><ul>
<li class="chapter" data-level="4.8.1" data-path="chap-rediger.html"><a href="chap-rediger.html#formats-vectoriels-et-raster"><i class="fa fa-check"></i><b>4.8.1</b> Formats vectoriels et raster</a></li>
<li class="chapter" data-level="4.8.2" data-path="chap-rediger.html"><a href="chap-rediger.html#fonctions"><i class="fa fa-check"></i><b>4.8.2</b> Fonctions</a></li>
<li class="chapter" data-level="4.8.3" data-path="chap-rediger.html"><a href="chap-rediger.html#package-ragg"><i class="fa fa-check"></i><b>4.8.3</b> Package ragg</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-package.html"><a href="chap-package.html"><i class="fa fa-check"></i><b>5</b> Package</a><ul>
<li class="chapter" data-level="5.1" data-path="chap-package.html"><a href="chap-package.html#premier-package"><i class="fa fa-check"></i><b>5.1</b> Premier package</a><ul>
<li class="chapter" data-level="5.1.1" data-path="chap-package.html"><a href="chap-package.html#création"><i class="fa fa-check"></i><b>5.1.1</b> Création</a></li>
<li class="chapter" data-level="5.1.2" data-path="chap-package.html"><a href="chap-package.html#première-fonction"><i class="fa fa-check"></i><b>5.1.2</b> Première fonction</a></li>
<li class="chapter" data-level="5.1.3" data-path="chap-package.html"><a href="chap-package.html#sec:package-cds"><i class="fa fa-check"></i><b>5.1.3</b> Contrôle de source</a></li>
<li class="chapter" data-level="5.1.4" data-path="chap-package.html"><a href="chap-package.html#package.r"><i class="fa fa-check"></i><b>5.1.4</b> package.R</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="chap-package.html"><a href="chap-package.html#organisation-du-package"><i class="fa fa-check"></i><b>5.2</b> Organisation du package</a><ul>
<li class="chapter" data-level="5.2.1" data-path="chap-package.html"><a href="chap-package.html#sec:package-description"><i class="fa fa-check"></i><b>5.2.1</b> Fichier DESCRIPTION</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-package.html"><a href="chap-package.html#fichier-news.md"><i class="fa fa-check"></i><b>5.2.2</b> Fichier NEWS.md</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-package.html"><a href="chap-package.html#vignette-et-pkgdown"><i class="fa fa-check"></i><b>5.3</b> Vignette et pkgdown</a></li>
<li class="chapter" data-level="5.4" data-path="chap-package.html"><a href="chap-package.html#code-spécifique-aux-packages"><i class="fa fa-check"></i><b>5.4</b> Code spécifique aux packages</a><ul>
<li class="chapter" data-level="5.4.1" data-path="chap-package.html"><a href="chap-package.html#importation-de-fonctions"><i class="fa fa-check"></i><b>5.4.1</b> Importation de fonctions</a></li>
<li class="chapter" data-level="5.4.2" data-path="chap-package.html"><a href="chap-package.html#méthodes-s3"><i class="fa fa-check"></i><b>5.4.2</b> Méthodes S3</a></li>
<li class="chapter" data-level="5.4.3" data-path="chap-package.html"><a href="chap-package.html#en-pratique"><i class="fa fa-check"></i><b>5.4.3</b> En pratique</a></li>
<li class="chapter" data-level="5.4.4" data-path="chap-package.html"><a href="chap-package.html#code-c"><i class="fa fa-check"></i><b>5.4.4</b> Code C++</a></li>
<li class="chapter" data-level="5.4.5" data-path="chap-package.html"><a href="chap-package.html#package-bien-rangé"><i class="fa fa-check"></i><b>5.4.5</b> Package bien rangé</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="chap-package.html"><a href="chap-package.html#bibliographie-1"><i class="fa fa-check"></i><b>5.5</b> Bibliographie</a><ul>
<li class="chapter" data-level="5.5.1" data-path="chap-package.html"><a href="chap-package.html#préparation"><i class="fa fa-check"></i><b>5.5.1</b> Préparation</a></li>
<li class="chapter" data-level="5.5.2" data-path="chap-package.html"><a href="chap-package.html#citations"><i class="fa fa-check"></i><b>5.5.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="chap-package.html"><a href="chap-package.html#données"><i class="fa fa-check"></i><b>5.6</b> Données</a></li>
<li class="chapter" data-level="5.7" data-path="chap-package.html"><a href="chap-package.html#tests-unitaires"><i class="fa fa-check"></i><b>5.7</b> Tests unitaires</a></li>
<li class="chapter" data-level="5.8" data-path="chap-package.html"><a href="chap-package.html#fichier-.gitignore"><i class="fa fa-check"></i><b>5.8</b> Fichier .gitignore</a></li>
<li class="chapter" data-level="5.9" data-path="chap-package.html"><a href="chap-package.html#sec:package-ci5"><i class="fa fa-check"></i><b>5.9</b> Intégration continue</a></li>
<li class="chapter" data-level="5.10" data-path="chap-package.html"><a href="chap-package.html#sec:package-cran"><i class="fa fa-check"></i><b>5.10</b> CRAN</a><ul>
<li class="chapter" data-level="5.10.1" data-path="chap-package.html"><a href="chap-package.html#test-du-package"><i class="fa fa-check"></i><b>5.10.1</b> Test du package</a></li>
<li class="chapter" data-level="5.10.2" data-path="chap-package.html"><a href="chap-package.html#soumission"><i class="fa fa-check"></i><b>5.10.2</b> Soumission</a></li>
<li class="chapter" data-level="5.10.3" data-path="chap-package.html"><a href="chap-package.html#maintenance"><i class="fa fa-check"></i><b>5.10.3</b> Maintenance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-ci.html"><a href="chap-ci.html"><i class="fa fa-check"></i><b>6</b> Intégration continue</a><ul>
<li class="chapter" data-level="6.1" data-path="chap-ci.html"><a href="chap-ci.html#outils"><i class="fa fa-check"></i><b>6.1</b> Outils</a><ul>
<li class="chapter" data-level="6.1.1" data-path="chap-ci.html"><a href="chap-ci.html#github-actions"><i class="fa fa-check"></i><b>6.1.1</b> GitHub Actions</a></li>
<li class="chapter" data-level="6.1.2" data-path="chap-ci.html"><a href="chap-ci.html#codecov"><i class="fa fa-check"></i><b>6.1.2</b> Codecov</a></li>
<li class="chapter" data-level="6.1.3" data-path="chap-ci.html"><a href="chap-ci.html#github-pages"><i class="fa fa-check"></i><b>6.1.3</b> GitHub Pages</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="chap-ci.html"><a href="chap-ci.html#principes"><i class="fa fa-check"></i><b>6.2</b> Principes</a><ul>
<li class="chapter" data-level="6.2.1" data-path="chap-ci.html"><a href="chap-ci.html#sec:pat"><i class="fa fa-check"></i><b>6.2.1</b> Obtention d’un jeton d’accès personnel</a></li>
<li class="chapter" data-level="6.2.2" data-path="chap-ci.html"><a href="chap-ci.html#sec:secrets-ci"><i class="fa fa-check"></i><b>6.2.2</b> Secrets du projet</a></li>
<li class="chapter" data-level="6.2.3" data-path="chap-ci.html"><a href="chap-ci.html#activation-du-dépôt-sur-codecov"><i class="fa fa-check"></i><b>6.2.3</b> Activation du dépôt sur CodeCov</a></li>
<li class="chapter" data-level="6.2.4" data-path="chap-ci.html"><a href="chap-ci.html#scripter-les-actions-de-github"><i class="fa fa-check"></i><b>6.2.4</b> Scripter les actions de GitHub</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="chap-ci.html"><a href="chap-ci.html#modèles-de-scripts"><i class="fa fa-check"></i><b>6.3</b> Modèles de scripts</a><ul>
<li class="chapter" data-level="6.3.1" data-path="chap-ci.html"><a href="chap-ci.html#sec:memoiR-ci"><i class="fa fa-check"></i><b>6.3.1</b> memoiR</a></li>
<li class="chapter" data-level="6.3.2" data-path="chap-ci.html"><a href="chap-ci.html#sec:bookdown-ci"><i class="fa fa-check"></i><b>6.3.2</b> Projet d’ouvrage</a></li>
<li class="chapter" data-level="6.3.3" data-path="chap-ci.html"><a href="chap-ci.html#articles-et-présentations"><i class="fa fa-check"></i><b>6.3.3</b> Articles et présentations</a></li>
<li class="chapter" data-level="6.3.4" data-path="chap-ci.html"><a href="chap-ci.html#sec:blogdown-ci"><i class="fa fa-check"></i><b>6.3.4</b> Site web blogdown</a></li>
<li class="chapter" data-level="6.3.5" data-path="chap-ci.html"><a href="chap-ci.html#sec:package-ci6"><i class="fa fa-check"></i><b>6.3.5</b> Packages R</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="chap-ci.html"><a href="chap-ci.html#sec:ci-badges"><i class="fa fa-check"></i><b>6.4</b> Ajouter des badges</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-shiny.html"><a href="chap-shiny.html"><i class="fa fa-check"></i><b>7</b> Shiny</a><ul>
<li class="chapter" data-level="7.1" data-path="chap-shiny.html"><a href="chap-shiny.html#première-application"><i class="fa fa-check"></i><b>7.1</b> Première application</a></li>
<li class="chapter" data-level="7.2" data-path="chap-shiny.html"><a href="chap-shiny.html#application-plus-élaborée"><i class="fa fa-check"></i><b>7.2</b> Application plus élaborée</a><ul>
<li class="chapter" data-level="7.2.1" data-path="chap-shiny.html"><a href="chap-shiny.html#méthode-de-travail"><i class="fa fa-check"></i><b>7.2.1</b> Méthode de travail</a></li>
<li class="chapter" data-level="7.2.2" data-path="chap-shiny.html"><a href="chap-shiny.html#exemple"><i class="fa fa-check"></i><b>7.2.2</b> Exemple</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chap-shiny.html"><a href="chap-shiny.html#sec:hebergement-shiny"><i class="fa fa-check"></i><b>7.3</b> Hébergement</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-enseigner.html"><a href="chap-enseigner.html"><i class="fa fa-check"></i><b>8</b> Enseigner avec R</a><ul>
<li class="chapter" data-level="8.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#learnr"><i class="fa fa-check"></i><b>8.1</b> learnr</a><ul>
<li class="chapter" data-level="8.1.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#premier-tutoriel"><i class="fa fa-check"></i><b>8.1.1</b> Premier tutoriel</a></li>
<li class="chapter" data-level="8.1.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#diffusion"><i class="fa fa-check"></i><b>8.1.2</b> Diffusion</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#github-classrooms"><i class="fa fa-check"></i><b>8.2</b> GitHub Classrooms</a><ul>
<li class="chapter" data-level="8.2.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#inscription"><i class="fa fa-check"></i><b>8.2.1</b> Inscription</a></li>
<li class="chapter" data-level="8.2.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#organisations"><i class="fa fa-check"></i><b>8.2.2</b> Organisations</a></li>
<li class="chapter" data-level="8.2.3" data-path="chap-enseigner.html"><a href="chap-enseigner.html#nouvelle-salle-de-classe"><i class="fa fa-check"></i><b>8.2.3</b> Nouvelle salle de classe</a></li>
<li class="chapter" data-level="8.2.4" data-path="chap-enseigner.html"><a href="chap-enseigner.html#préparer-un-modèle-de-dépôt"><i class="fa fa-check"></i><b>8.2.4</b> Préparer un modèle de dépôt</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chap-conclusion.html"><a href="chap-conclusion.html"><i class="fa fa-check"></i><b>9</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li>
  <a href="https://github.com/EricMarcon/travailleR" target="blank">
    Hébergé sur GitHub, publié par bookdown
  </a>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Travailler avec R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap:package" class="section level1">
<h1><span class="header-section-number">5</span> Package</h1>
<p>Les packages de R permettent d’étendre les fonctionnalités du logiciel par du code fourni par la communauté des développeurs.
Ils sont la clé du succès de R parce qu’ils permettent de diffuser rapidement de nouvelles méthodes issues de la recherche ou d’ajouter de nouveaux outils qui peuvent devenir des standards, comme le <strong>tidyverse</strong>.</p>
<p>Il est utile de produire un package quand on a écrit des nouvelles fonctions qui forment un ensemble cohérent.
Un package à usage personnel ou limité à une équipe de travail est simple à mettre en place et le temps gagné en utilisant facilement la version à jour de chaque fonction amortit très rapidement le temps consacré à la fabrication du package.
Ce type de package a vocation à être hébergé sur GitHub.</p>
<p>Des packages à usage plus large, qui fournissent par exemple le code correspondant à une méthode publiée, sont placés dans le dépôt CRAN, d’où ils pourront être installés par la commande standard <code>install.packages()</code>.
CRAN effectue des vérifications poussées du code et n’accepte que les packages passant sans aucun avertissement sa batterie de tests.
Ils doivent respecter la politique<a href="#fn82" class="footnote-ref" id="fnref82"><sup>82</sup></a> du dépôt.</p>
<p>La documentation pour la création de packages est abondante.
L’ouvrage de référence est celui de <span class="citation">Wickham (<a href="#ref-Wickham2015" role="doc-biblioref">2015</a>)</span>, à consulter en tant que référence.</p>
<p>L’approche utilisée ici consiste à créer un premier package très rapidement pour comprendre que la démarche est assez simple.
Il sera ensuite enrichi des éléments nécessaires à un package diffusé à d’autres utilisateurs que son concepteur: une documentation complète et des tests de bon fonctionnement notamment.</p>
<div id="premier-package" class="section level2">
<h2><span class="header-section-number">5.1</span> Premier package</h2>
<p>Cette introduction reprend les recommandations du blog <em>Créer un package en quelques minutes</em><a href="#fn83" class="footnote-ref" id="fnref83"><sup>83</sup></a> de ThinkR.</p>
<div id="création" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Création</h3>
<p>Les packages ont une organisation stricte dans une structure de fichiers et de répertoires figée.
Il est possible de créer cette structure manuellement mais des packages spécialisés peuvent s’en charger:</p>
<ul>
<li><strong>usethis</strong> automatise la création des dossiers;</li>
<li><strong>roxygen2</strong> permet d’automatiser la documentation obligatoire des packages;</li>
<li><strong>devtools</strong> est la boîte à outils du développeur, permettant notamment de construire et tester les packages;</li>
</ul>
<p>Les trois sont à installer en premier lieu:</p>

<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="chap-package.html#cb291-1"></a><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;usethis&quot;</span>, <span class="st">&quot;roxygen2&quot;</span>, <span class="st">&quot;devtools&quot;</span>))</span></code></pre></div>

<p>Le package à créer sera un projet RStudio.
Dans le menu des projets, sélectionner “New Project &gt; New Directory &gt; R package using devtools…”, choisir le nom du projet et son dossier parent.
Le package s’appellera <strong>multiple</strong>, dans le dossier <code>%LOCALAPPDATA%\ProjetsR</code> en suivant les recommandations de la section <a href="chap-logiciels.html#sec:solution-dossiers">1.2.4</a>.</p>
<p>Le nom du package doit respecter les contraintes des noms de projets: pas de caractères spéciaux, pas d’espaces…
Il doit aussi être évocateur de l’objet du package.
Si le package doit être diffusé, toute sa documentation sera rédigée en Anglais, y compris son nom.</p>
<p>La structure minimale est crée:</p>
<ul>
<li>un fichier <code>DESCRIPTION</code> qui indique que le dossier contient un package et précise au minimum son nom;</li>
<li>un fichier <code>NAMESPACE</code> qui déclare comment le package intervient dans la gestion des noms des objets de R (son contenu sera mis à jour par <strong>roxygen2</strong>);</li>
<li>un dossier <code>R</code> qui contient le code des fonctions offertes par le package (vide à ce stade).</li>
</ul>
<p>Le package peut être testé tout de suite: dans la fenêtre <em>Build</em> de RStudio, cliquer sur “Install and Restart” construit le package et le charge dans R, après avoir redémarré le programme pour éviter tout conflit.</p>
<p>Dans la fenêtre <em>Packages</em>, <strong>multiple</strong> est maintenant visible.
Il est chargé, mais ne contient rien.</p>
</div>
<div id="première-fonction" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Première fonction</h3>
<div id="fichiers" class="section level4">
<h4><span class="header-section-number">5.1.2.1</span> Fichiers</h4>
<p>Les fonctions sont placées dans un ou plusieurs fichier <code>.R</code> dans le dossier <code>R</code>.
L’organisation de ces fichiers est libre.
Pour cet exemple, un fichier du nom de chaque fonction sera créé.
Des fichiers regroupant les fonctions similaires ou un seul fichier contenant tout le code sont des choix possibles.</p>
<p>Le choix fait ici est le suivant:</p>
<ul>
<li>un fichier qui contiendra le code commun à tout le package: <code>package.R</code>;</li>
<li>un fichier commun à toutes les fonctions: <code>fonctions.R</code>.</li>
</ul>
</div>
<div id="création-1" class="section level4">
<h4><span class="header-section-number">5.1.2.2</span> Création</h4>
<p>La première fonction, <code>double()</code>, est créée et enregistrée dans le fichier <code>fonctions.R</code>:</p>

<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="chap-package.html#cb292-1"></a>double &lt;-<span class="st"> </span><span class="cf">function</span>(number) {</span>
<span id="cb292-2"><a href="chap-package.html#cb292-2"></a>    <span class="kw">return</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>number)</span>
<span id="cb292-3"><a href="chap-package.html#cb292-3"></a>}</span></code></pre></div>

<p>A ce stade, la fonction est interne au package et n’est pas accessible depuis l’environnement de travail.
Pour s’en persuader, construire le package (<em>Install and Restart</em>) et vérifier le bon fonctionnement de la fonction:</p>

<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="chap-package.html#cb293-1"></a><span class="kw">double</span>(<span class="dv">2</span>)</span></code></pre></div>

<p>Le résultat est un vecteur composé de deux 0 parce que la fonction appelée est un homonyme du package <strong>base</strong> (voir sa documentation en tapant <code>?double</code>):</p>

<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="chap-package.html#cb294-1"></a>base<span class="op">::</span><span class="kw">double</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0 0</code></pre>

<p>Pour que la fonction de notre package soit visible, elle doit être <em>exportée</em> en la déclarant dans le fichier <code>NAMESPACE</code>.
C’est le travail de <strong>roxygen2</strong> qui gère en même temps la documentation de chaque fonction.
Pour l’activer, placer le curseur dans la fonction et appeler le menu “Code &gt; Insert Roxygen Skeleton”.
Des commentaires sont ajoutés avant la fonction:</p>

<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="chap-package.html#cb296-1"></a><span class="co">#&#39; Title</span></span>
<span id="cb296-2"><a href="chap-package.html#cb296-2"></a><span class="co">#&#39;</span></span>
<span id="cb296-3"><a href="chap-package.html#cb296-3"></a><span class="co">#&#39; @param number </span></span>
<span id="cb296-4"><a href="chap-package.html#cb296-4"></a><span class="co">#&#39;</span></span>
<span id="cb296-5"><a href="chap-package.html#cb296-5"></a><span class="co">#&#39; @return</span></span>
<span id="cb296-6"><a href="chap-package.html#cb296-6"></a><span class="co">#&#39; @export</span></span>
<span id="cb296-7"><a href="chap-package.html#cb296-7"></a><span class="co">#&#39;</span></span>
<span id="cb296-8"><a href="chap-package.html#cb296-8"></a><span class="co">#&#39; @examples</span></span>
<span id="cb296-9"><a href="chap-package.html#cb296-9"></a>double &lt;-<span class="st"> </span><span class="cf">function</span>(number) {</span>
<span id="cb296-10"><a href="chap-package.html#cb296-10"></a>    <span class="kw">return</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>number)</span>
<span id="cb296-11"><a href="chap-package.html#cb296-11"></a>}</span></code></pre></div>

<p>Les commentaires à destination de <strong>roxygen2</strong> commencent par <code>#'</code>:</p>
<ul>
<li>la première ligne contient le titre de la fonction, c’est-à-dire un descriptif très court: son nom en général;</li>
<li>la ligne suivante (séparée par un saut de ligne) peut contenir sa description (rubrique <em>Description</em> dans l’aide);</li>
<li>la suivante (après un autre saut de ligne) peut contenir plus d’informations (rubrique <em>Details</em> dans l’aide);</li>
<li>les arguments de la fonction sont décrits par les lignes <code>@param</code>;</li>
<li><code>@return</code> décrit le résultat de la fonction;</li>
<li><code>@export</code> déclare que la fonction est exportée: elle sera donc utilisable dans l’environnement de travail;</li>
<li>des exemples peuvent être ajoutés.</li>
</ul>
<p>La documentation doit être complétée:</p>

<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="chap-package.html#cb297-1"></a><span class="co">#&#39; double</span></span>
<span id="cb297-2"><a href="chap-package.html#cb297-2"></a><span class="co">#&#39; </span></span>
<span id="cb297-3"><a href="chap-package.html#cb297-3"></a><span class="co">#&#39; Double value of numbers.</span></span>
<span id="cb297-4"><a href="chap-package.html#cb297-4"></a><span class="co">#&#39;</span></span>
<span id="cb297-5"><a href="chap-package.html#cb297-5"></a><span class="co">#&#39; Calculate the double values of numbers.</span></span>
<span id="cb297-6"><a href="chap-package.html#cb297-6"></a><span class="co">#&#39; </span></span>
<span id="cb297-7"><a href="chap-package.html#cb297-7"></a><span class="co">#&#39; @param number a numeric vector.</span></span>
<span id="cb297-8"><a href="chap-package.html#cb297-8"></a><span class="co">#&#39;</span></span>
<span id="cb297-9"><a href="chap-package.html#cb297-9"></a><span class="co">#&#39; @return A vector of the same length as `number` containing the </span></span>
<span id="cb297-10"><a href="chap-package.html#cb297-10"></a><span class="co">#&#39;   transformed values.</span></span>
<span id="cb297-11"><a href="chap-package.html#cb297-11"></a><span class="co">#&#39; @export</span></span>
<span id="cb297-12"><a href="chap-package.html#cb297-12"></a><span class="co">#&#39;</span></span>
<span id="cb297-13"><a href="chap-package.html#cb297-13"></a><span class="co">#&#39; @examples</span></span>
<span id="cb297-14"><a href="chap-package.html#cb297-14"></a><span class="co">#&#39; double(2)</span></span>
<span id="cb297-15"><a href="chap-package.html#cb297-15"></a><span class="co">#&#39; double(1:4)</span></span>
<span id="cb297-16"><a href="chap-package.html#cb297-16"></a>double &lt;-<span class="st"> </span><span class="cf">function</span>(number) {</span>
<span id="cb297-17"><a href="chap-package.html#cb297-17"></a>    <span class="kw">return</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>number)</span>
<span id="cb297-18"><a href="chap-package.html#cb297-18"></a>}</span></code></pre></div>

<p>Ne pas hésiter à s’inspirer de l’aide de fonctions existantes pour respecter les standards de R (ici: <code>?log</code>):</p>
<ul>
<li>penser que les fonctions sont normalement vectorielles: <code>number</code> est par défaut un vecteur, pas un scalaire;</li>
<li>certains éléments commencent par une majuscule et se terminent par un point parce que ce sont des paragraphes dans le fichier d’aide;</li>
<li>le titre n’a pas de point final;</li>
<li>la description des paramètres ne commence pas par une majuscule.</li>
</ul>
<p>La prise en compte des changements dans la documentation nécessitent d’appeler la fonction <code>roxygenize()</code>.
Dans la fenêtre <em>Build</em>, le menu “More &gt; Document” permet de le faire.
Ensuite, construire le package (<em>Install and Restart</em>) et vérifier le résultat en exécutant la fonction et en affichant son aide:</p>

<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="chap-package.html#cb298-1"></a><span class="kw">double</span>(<span class="dv">2</span>)</span>
<span id="cb298-2"><a href="chap-package.html#cb298-2"></a><span class="st">`</span><span class="dt">?</span><span class="st">`</span>(double)</span></code></pre></div>

<p>Il est possible d’automatiser la mise à jour de la documentation à chaque construction du package par le menu “Build &gt; Configure Build Tools…”: cliquer sur “Configure” et cocher la case “Automatically reoxygenize when running Install and Restart”.
C’est un choix efficace pour un petit package mais pénalisant quand le temps de mise à jour de la documentation s’allonge avec la complexité du package. La reconstruction du package est le plus souvent utilisée pour tester des modifications du code: sa rapidité est essentielle.</p>
<p>La documentation pour <strong>roxygen2</strong> supporte le format Markdown<a href="#fn84" class="footnote-ref" id="fnref84"><sup>84</sup></a>.</p>
<p>A ce stade, le package est fonctionnel: il contient une fonction et un début de documentation.
Il est temps de lancer une vérification de son code: dans la fenêtre <em>Build</em>, cliquer sur “Check” ou utiliser la commande <code>devtools::check()</code>.
L’opération <em>réoxygène</em> le package (met à jour sa documentation), effectue un grand nombre de tests et renvoie la liste des erreurs, avertissements et notes détectées.
L’objectif est toujours de n’avoir aucune alerte: elles doivent être traitées immédiatement.
Par exemple, le retour suivant est un avertissement sur la non-conformité de la licence déclarée:</p>
<pre><code>&gt; checking DESCRIPTION meta-information ... WARNING
  Non-standard license specification:
    `use_gpl3_license()`
  Standardizable: FALSE

0 errors v | 1 warning x | 0 notes v
Erreur : R CMD check found WARNINGs</code></pre>
<p>Pour la corriger, mettre à jour, exécuter la commande de mise à jour de la licence, en commençant par votre nom:</p>

<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="chap-package.html#cb300-1"></a><span class="kw">options</span>(<span class="dt">usethis.full_name =</span> <span class="st">&quot;Eric Marcon&quot;</span>)</span>
<span id="cb300-2"><a href="chap-package.html#cb300-2"></a>usethis<span class="op">::</span><span class="kw">use_gpl3_license</span>()</span></code></pre></div>

<p>La liste des licences valides est fournie par R<a href="#fn85" class="footnote-ref" id="fnref85"><sup>85</sup></a>.</p>
<p>Après correction, relancer les tests jusqu’à la disparition des alertes.</p>
</div>
</div>
<div id="sec:package-cds" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Contrôle de source</h3>
<p>Il est temps de placer le code sous contrôle de source.</p>
<p>Activer le contrôle de source dans les options du projet (figure <a href="chap-git.html#fig:git-Project">3.2</a>).
Redémarrer RStudio à la demande.</p>
<p>Créer un dépôt sur GitHub et y pousser le dépôt local, comme expliqué dans le chapitre <a href="chap-git.html#chap:git">3</a>.</p>
<p>Créer le fichier <code>README.md</code>:</p>
<pre><code># multiple

An R package to compute mutiple of numbers.</code></pre>
<p>Le développement du package est ponctué par de nombreux commits à chaque modification et une publication (push) à chaque étape, validée par une incrémentation du numéro de version.</p>
</div>
<div id="package.r" class="section level3">
<h3><span class="header-section-number">5.1.4</span> package.R</h3>
<p>Le fichier <code>package.R</code> est destiné à recevoir le code R et surtout les commentaires pour <strong>roxygen2</strong> qui concernent l’ensemble du package.</p>
<p>Le premier bloc de commentaire produira l’aide du package (<code>?multiple</code>).</p>
<pre><code>#&#39; multiple-package
#&#39;
#&#39; Multiples of numbers
#&#39; 
#&#39; This package allows simple computation of multiples 
#&#39; of numbers, including fast algorithms for integers.
#&#39;
#&#39; @name multiple
#&#39; @docType package
NULL</code></pre>
<p>Son organisation est identique à celle des documentations de fonctions, avec deux déclarations particulières pour le nom du package et le type de documentation.
Le code <code>NULL</code> après les commentaires indique à <strong>roxygen2</strong> qu’il n’y a pas de code R lié.</p>
<p>La documentation est mise à jour par la commande <code>roxygen2::roxygenise()</code>.
Après reconstruction du package, vérifier que l’aide est est apparue: <code>?multiple</code>.</p>
</div>
</div>
<div id="organisation-du-package" class="section level2">
<h2><span class="header-section-number">5.2</span> Organisation du package</h2>
<div id="sec:package-description" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Fichier DESCRIPTION</h3>
<p>Le fichier doit être complété:</p>
<pre><code>Package: multiple
Title: Calculate multiples of numbers
Version: 0.0.0.9000
Authors@R: 
  person(given = &quot;Eric&quot;,
           family = &quot;Marcon&quot;,
           role = c(&quot;aut&quot;, &quot;cre&quot;),
           email = &quot;e.marcon@free.fr&quot;,
           comment = c(ORCID = &quot;0000-0002-5249-321X&quot;))
Description: This package allows simple computation
  of multiples of numbers, including fast algorithms
  for integers.
License: GPL-3
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1</code></pre>
<p>Le nom du package est figé et ne doit pas être modifié.</p>
<p>Son titre doit décrire en une ligne à quoi il sert.
Le titre est affiché dans la fenêtre <em>Packages</em> à côté des noms des packages.</p>
<p>La version doit respecter les conventions:</p>
<ul>
<li>Le premier nombre est la version majeure, 0 tant que le package n’est pas stable puis 1.
La version majeure ne change que si le package n’est plus compatible avec ses versions précédentes, ce qui oblige les utilisateurs à modifier leur code.</li>
<li>Le deuxième est la version mineure, incrémentée quand des fonctionnalités nouvelles sont ajoutées.</li>
<li>Le troisième est la version de correction: 0 à l’origine, incrémentée à chaque correction de code sans nouvelle fonctionnalité.</li>
<li>Le quatrième est réservé au développement, et commence à 9000.
Il est incrémenté à chaque version instable et disparaît quand une nouvelle version stable (<em>release</em>) est produite.</li>
</ul>
<p>Exemple: une correction de bug sur la version 1.3.0 produit la version 1.3.1.
Les versions de développement suivantes (instables, non destinées à l’usage en production) sont 1.3.1.9000 puis 1.3.1.9001, etc.
Le numéro de version doit être mis à jour à chaque fois que le package est poussé sur GitHub.
Quand le développement est stabilisé, la nouvelle version, destinée à être utilisée en production, est 1.3.2 si elle n’apporte pas de nouvelle fonctionnalité ou 1.4.0 dans le cas contraire.</p>
<p>La description des auteurs est assez lourde mais simple à comprendre.
Les identifiants Orcid des auteurs académiques peuvent être utilisés.
Si le package a plusieurs auteurs, ils sont placés dans une fonction <code>c()</code>: <code>c(person(...), person())</code> pour deux auteurs.
Dans ce cas, il faut préciser le rôle de chacun :</p>
<ul>
<li>“cre” pour le créateur du package</li>
<li>“aut” pour un auteur parmi les autres</li>
<li>“ctb” pour un contributeur, qui peut avoir signalé un bug ou fourni un peu de code.</li>
</ul>
<p>La description du package en un paragraphe permet de donner plus d’informations.</p>
<p>La licence précise la façon dont le package peut être utilisé et modifié.
GPL-3 est une bonne valeur par défaut, mais d’autres choix sont possibles<a href="#fn86" class="footnote-ref" id="fnref86"><sup>86</sup></a>.</p>
<p>L’option <code>LazyData</code> signifie que les données d’exemples fournies avec le package peuvent être utilisées sans les appeler au préalable par la fonction <code>data()</code>: c’est le standard actuel.</p>
<p>Enfin, les deux dernières lignes sont gérées par <strong>roxygen2</strong>.</p>
</div>
<div id="fichier-news.md" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Fichier NEWS.md</h3>
<p>Le fichier <code>NEWS.md</code> contient l’historique du package.
Les nouvelles versions sont ajoutées en haut du fichier.</p>
<p>Créer une première version du fichier:</p>
<pre><code># multiple 0.0.0.9000

## New features

* Initial version of the package</code></pre>
<p>Les titres de premier niveau doivent contenir le nom du package et sa version.
Les titres de niveau 2 sont libres, mais contiennent en général des rubriques comme “New features” et “Bug Fixes”.</p>
<p>Pour ne pas multiplier les versions décrites, il est conseillé de modifier la version en cours et de compléter la documentation jusqu’au changement de version de correction (troisième nombre).
Ensuite, l’entrée correspondant à cette version reste figée et une nouvelle entrée est ajoutée.</p>
</div>
</div>
<div id="vignette-et-pkgdown" class="section level2">
<h2><span class="header-section-number">5.3</span> Vignette et pkgdown</h2>
<p>Une vignette est indispensable pour documenter correctement le package:</p>

<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="chap-package.html#cb305-1"></a>usethis<span class="op">::</span><span class="kw">use_vignette</span>(<span class="st">&quot;multiple&quot;</span>)</span></code></pre></div>

<p>Le fichier <code>multiple.Rmd</code> est créé dans le dossier <code>vignettes</code>.
Ajouter un sous-titre dans son entête: la description courte du package:</p>
<pre><code>title: &quot;multiple&quot;
subtitle: &quot;Multiples of numbers&quot;</code></pre>
<p>Le reste de l’entête permet à R de construire la vignette à partir de code R Markdown.</p>
<p>Le corps de la vignette contient par défaut du code R pour déclarer les options de présentation des bouts de code et le chargement du package.
Une introduction à l’utilisation du package doit être écrite dans ce documents, en R Markdown.</p>
<p>Le package <strong>pkgdown</strong> permet de créer un site d’accompagnement du package<a href="#fn87" class="footnote-ref" id="fnref87"><sup>87</sup></a>, qui reprend le fichier <code>README.md</code> comme page d’accueil, la vignette dans une rubrique “Get Started”, l’ensemble des fichiers d’aide avec leurs exemples exécutés (section “Reference”), le fichier <code>NEWS.md</code> pour un historique du package (section “Changelog”) et des informations du fichier <code>DESCRIPTION</code>.</p>
<p>Créer le site avec <strong>usethis</strong></p>

<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="chap-package.html#cb307-1"></a>usethis<span class="op">::</span><span class="kw">use_pkgdown</span>()</span></code></pre></div>

<p>Construire ensuite le site.
Cette commande sera exécutée à nouveau à chaque changement de version du package:</p>

<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="chap-package.html#cb308-1"></a>pkgdown<span class="op">::</span><span class="kw">build_site</span>()</span></code></pre></div>

<p>Le site est placé dans le dossier <code>docs</code>.
Ouvrir le fichier <code>index.htm</code> avec un navigateur web pour le visualiser.
Dès que le projet sera poussé sur GitHub, activer les pages du dépôt pour que le site soit visible en ligne (voir section <a href="chap-git.html#sec:github-pages">3.6</a>).</p>
<p><strong>pkgdown</strong> place le site dans le dossier <code>docs</code>.</p>
<p>Ajouter l’adresse des pages GitHub dans une nouvelle ligne du fichier <code>DESCRIPTION</code>:</p>
<pre><code>URL: https://GitHubID.github.io/multiple</code></pre>
<p>L’ajouter aussi dans le fichier <code>_pkgdown.yml</code> qui a été créé vide, ainsi que l’option suivante:</p>
<pre><code>url: https://GitHubID.github.io/multiple

development:
  mode: auto</code></pre>
<p><strong>pkgdown</strong> place le site dans le dossier <code>docs/dev</code> si le site d’une version stable (à trois nombres) du package existe dans <code>docs</code> et que la version en cours est une version de développement (à quatre nombres).
De cette façon, les utilisateurs d’une version de production du package ont accès au site sans qu’il soit perturbé par les versions de développement.</p>
<p>Le site peut être enrichi de plusieurs façons:</p>
<ul>
<li>En ajoutant des articles au format R Markdown dans le dossier <code>vignettes/articles</code>;</li>
<li>En améliorant sa présentation (regroupement des fonctions par thèmes, ajout de badges, d’un sticker<a href="#fn88" class="footnote-ref" id="fnref88"><sup>88</sup></a>…): se référer à la vignette de <strong>pkgdown</strong>.</li>
</ul>
<p>Pour enrichir la documentation du package, il est possible d’utiliser un fichier <code>README.Rmd</code> au format R Markdown, à tricoter pour créer le <code>README.md</code> standard de GitHub, utilisé comme page d’accueil du site <strong>pkgdown</strong>, qui peut de cette façon présenter des exemples d’utilisation du code.
La démarche est détaillée dans <em>R Packages</em><a href="#fn89" class="footnote-ref" id="fnref89"><sup>89</sup></a>.
La complexité ajoutée est à comparer au gain obtenu: une page d’accueil simple (sans code) avec des liens vers la vignette et les articles est plus simple à mettre en oeuvre.</p>
</div>
<div id="code-spécifique-aux-packages" class="section level2">
<h2><span class="header-section-number">5.4</span> Code spécifique aux packages</h2>
<div id="importation-de-fonctions" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Importation de fonctions</h3>
<p>Créons une nouvelle fonction dans <code>fonctions.R</code> qui ajoute un bruit aléatoire à la valeur double:</p>

<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="chap-package.html#cb311-1"></a>fuzzydouble &lt;-<span class="st"> </span><span class="cf">function</span>(number, <span class="dt">sd =</span> <span class="dv">1</span>) {</span>
<span id="cb311-2"><a href="chap-package.html#cb311-2"></a>    <span class="kw">return</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>number <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="kw">length</span>(number), <span class="dv">0</span>, sd))</span>
<span id="cb311-3"><a href="chap-package.html#cb311-3"></a>}</span></code></pre></div>

<p>Le bruit est tiré dans une loi normale centrée d’écart-type <code>sd</code> et ajouté à la valeur calculée.</p>
<p><code>rnorm()</code> est une fonction du package <strong>stats</strong>.
Même si le package est systématiquement chargé par R, le package d’appartenance de la fonction doit obligatoirement être déclaré: les seules exceptions sont les fonctions du package <strong>base</strong>.</p>
<p>Le package <strong>stats</strong> doit d’abord être déclaré dans <code>DESCRIPTION</code> qui contient une instruction <code>Imports:</code>.
Tous les packages utilisés par le code de <strong>multiple</strong> seront listés, séparés par des virgules.</p>
<pre><code>Imports: stats</code></pre>
<p>Cette “importation” signifie simplement que le package <strong>stats</strong> doit être chargé, mais pas nécessairement attaché (voir section <a href="chap-utiliseR.html#sec:environnements">2.2</a>), pour que <strong>multiple</strong> fonctionne.</p>
<p>Ensuite, la fonction <code>rnorm()</code> doit être trouvable dans l’environnement du package <strong>multiple</strong>.
Il y a plusieurs façons de remplir cette obligation.
D’abord, le commentaire suivant pourrait être fourni pour <strong>roxygen2</strong>:</p>

<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="chap-package.html#cb313-1"></a><span class="co">#&#39; @import stats</span></span></code></pre></div>

<p>Tout l’espace de nom du package <strong>stats</strong> serait attaché et accessible au package <strong>multiple</strong>.
Ce n’est pas une bonne pratique parce qu’elle multiplie les risques de conflits de noms (voir section <a href="chap-utiliseR.html#sec:environnements">2.2</a>).
Notons que la notion d’importation utilisée ici est différente de celle de <code>DESCRIPTION</code>, bien qu’elles aient le même nom.</p>
<p>Il est préférable d’importer uniquement la fonction <code>rnorm()</code> en la déclarant dans la documentation de la fonction:</p>

<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="chap-package.html#cb314-1"></a><span class="co">#&#39; @importFrom stats rnorm</span></span></code></pre></div>

<p>Ce n’est pas une pratique idéale non plus parce que l’origine de la fonction n’apparaîtrait pas clairement dans le code du package.</p>
<p>La bonne pratique est de ne rien importer (au sens de <strong>roxygen2</strong>) et de qualifier systématiquement les fonctions d’autres packages avec la syntaxe <code>package::fonction()</code>.
C’est la solution retenue ici parce que la directive <code>@importFrom</code> importerait la fonction dans tout le package <strong>multiple</strong>, pas seulement dans la fonction <code>fuzzydouble()</code>, au risque de créer des effets de bord (modifier le comportement d’une autre fonction du package qui n’assumerait pas l’importation de <code>rnorm()</code>).
Finalement, le code de la fonction est le suivant:</p>

<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="chap-package.html#cb315-1"></a><span class="co">#&#39; fuzzydouble</span></span>
<span id="cb315-2"><a href="chap-package.html#cb315-2"></a><span class="co">#&#39; </span></span>
<span id="cb315-3"><a href="chap-package.html#cb315-3"></a><span class="co">#&#39; Double value of numbers with an error</span></span>
<span id="cb315-4"><a href="chap-package.html#cb315-4"></a><span class="co">#&#39; </span></span>
<span id="cb315-5"><a href="chap-package.html#cb315-5"></a><span class="co">#&#39; Calculate the double values of numbers </span></span>
<span id="cb315-6"><a href="chap-package.html#cb315-6"></a><span class="co">#&#39; and add a random error to the result.</span></span>
<span id="cb315-7"><a href="chap-package.html#cb315-7"></a><span class="co">#&#39;</span></span>
<span id="cb315-8"><a href="chap-package.html#cb315-8"></a><span class="co">#&#39; @param number a numeric vector.</span></span>
<span id="cb315-9"><a href="chap-package.html#cb315-9"></a><span class="co">#&#39; @param sd the standard deviation of the Gaussian error added.</span></span>
<span id="cb315-10"><a href="chap-package.html#cb315-10"></a><span class="co">#&#39;</span></span>
<span id="cb315-11"><a href="chap-package.html#cb315-11"></a><span class="co">#&#39; @return A vector of the same length as `number`</span></span>
<span id="cb315-12"><a href="chap-package.html#cb315-12"></a><span class="co">#&#39;  containing the transformed values.</span></span>
<span id="cb315-13"><a href="chap-package.html#cb315-13"></a><span class="co">#&#39; @export</span></span>
<span id="cb315-14"><a href="chap-package.html#cb315-14"></a><span class="co">#&#39;</span></span>
<span id="cb315-15"><a href="chap-package.html#cb315-15"></a><span class="co">#&#39; @examples</span></span>
<span id="cb315-16"><a href="chap-package.html#cb315-16"></a><span class="co">#&#39; fuzzydouble(2)</span></span>
<span id="cb315-17"><a href="chap-package.html#cb315-17"></a><span class="co">#&#39; fuzzydouble(1:4)</span></span>
<span id="cb315-18"><a href="chap-package.html#cb315-18"></a>fuzzydouble &lt;-<span class="st"> </span><span class="cf">function</span>(number, <span class="dt">sd =</span> <span class="dv">1</span>) {</span>
<span id="cb315-19"><a href="chap-package.html#cb315-19"></a>    <span class="kw">return</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>number <span class="op">+</span><span class="st"> </span>stats<span class="op">::</span><span class="kw">rnorm</span>(<span class="kw">length</span>(number), <span class="dv">0</span>, sd))</span>
<span id="cb315-20"><a href="chap-package.html#cb315-20"></a>}</span></code></pre></div>

</div>
<div id="méthodes-s3" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Méthodes S3</h3>
<p>Les méthodes S3 sont présentées en section <a href="chap-utiliseR.html#sec:S3">2.1.2</a>.</p>
<div id="classes" class="section level4">
<h4><span class="header-section-number">5.4.2.1</span> Classes</h4>
<p>Les objets appartiennent à des classes:</p>

<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="chap-package.html#cb316-1"></a><span class="co"># Classe d&#39;un nombre</span></span>
<span id="cb316-2"><a href="chap-package.html#cb316-2"></a><span class="kw">class</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="chap-package.html#cb318-1"></a><span class="co"># Classe d&#39;une fonction</span></span>
<span id="cb318-2"><a href="chap-package.html#cb318-2"></a><span class="kw">class</span>(sum)</span></code></pre></div>
<pre><code>## [1] &quot;function&quot;</code></pre>

<p>En plus des classes de base, les développeurs peuvent en créer d’autres.</p>
</div>
<div id="méthodes" class="section level4">
<h4><span class="header-section-number">5.4.2.2</span> Méthodes</h4>
<p>L’intérêt de créer de nouvelles classes est de leur adapter des méthodes existantes, le cas le plus courant étant <code>plot()</code>.
Il s’agit d’une méthode générique, c’est-à-dire un modèle de fonction, sans code, à décliner selon la classe d’objet à traiter.</p>

<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="chap-package.html#cb320-1"></a>plot</span></code></pre></div>
<pre><code>## function (x, y, ...) 
## UseMethod(&quot;plot&quot;)
## &lt;bytecode: 0x7fb0071ebaa8&gt;
## &lt;environment: namespace:base&gt;</code></pre>

<p>Il existe dans R de nombreuses déclinaisons de <code>plot</code> qui sont des fonctions dont le nom est de la forme <code>plot.class()</code>.
<strong>stats</strong> fournit une fonction <code>plot.lm()</code> pour créer une figure à partir d’un modèle linéaire.
De nombreux packages créent des classes adaptées à leurs objets et proposent une méthode <code>plot</code> pour chaque classe.
Les fonctions peuvent être listées:</p>

<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="chap-package.html#cb322-1"></a><span class="co"># Quelques fonctions plot()</span></span>
<span id="cb322-2"><a href="chap-package.html#cb322-2"></a><span class="kw">head</span>(<span class="kw">methods</span>(plot))</span></code></pre></div>
<pre><code>## [1] &quot;plot,ANY-method&quot;   &quot;plot,color-method&quot;
## [3] &quot;plot.AccumCurve&quot;   &quot;plot.acf&quot;         
## [5] &quot;plot.ACF&quot;          &quot;plot.addvar&quot;</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="chap-package.html#cb324-1"></a><span class="co"># Nombre total</span></span>
<span id="cb324-2"><a href="chap-package.html#cb324-2"></a><span class="kw">length</span>(<span class="kw">methods</span>(plot))</span></code></pre></div>
<pre><code>## [1] 145</code></pre>

<p>Inversement, les méthodes disponibles pour une classe peuvent être affichées:</p>

<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="chap-package.html#cb326-1"></a><span class="kw">methods</span>(<span class="dt">class =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] add1           alias          anova         
##  [4] case.names     coerce         confint       
##  [7] cooks.distance deviance       dfbeta        
## [10] dfbetas        drop1          dummy.coef    
## [13] effects        extractAIC     family        
## [16] formula        fortify        hatvalues     
## [19] influence      initialize     kappa         
## [22] labels         logLik         model.frame   
## [25] model.matrix   nobs           plot          
## [28] predict        print          proj          
## [31] qqnorm         qr             residuals     
## [34] rstandard      rstudent       show          
## [37] simulate       slotsFromS3    summary       
## [40] variable.names vcov          
## see &#39;?methods&#39; for accessing help and source code</code></pre>

<p>La méthode <code>print</code> est utilisée pour afficher tout objet (elle est implicite quand on saisit seulement le nom d’un objet):</p>

<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="chap-package.html#cb328-1"></a>my_lm &lt;-<span class="st"> </span><span class="kw">lm</span>(dist <span class="op">~</span><span class="st"> </span>speed, <span class="dt">data =</span> cars)</span>
<span id="cb328-2"><a href="chap-package.html#cb328-2"></a><span class="co"># Equivalent de &#39;&gt; my_lm&#39;</span></span>
<span id="cb328-3"><a href="chap-package.html#cb328-3"></a><span class="kw">print</span>(my_lm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Coefficients:
## (Intercept)        speed  
##     -17.579        3.932</code></pre>

<p>Le méthode <code>summary</code> affiche un résumé lisible de l’objet:</p>

<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="chap-package.html#cb330-1"></a><span class="kw">summary</span>(my_lm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -29.069  -9.525  -2.272   9.215  43.201 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -17.5791     6.7584  -2.601   0.0123 *  
## speed         3.9324     0.4155   9.464 1.49e-12 ***
## ---
## Signif. codes:  
## 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 15.38 on 48 degrees of freedom
## Multiple R-squared:  0.6511, Adjusted R-squared:  0.6438 
## F-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12</code></pre>

<p>Les autres méthodes ont été créées spécifiquement pour les besoins du package <strong>stats</strong>.</p>
</div>
<div id="attribution-dun-objet-à-une-classe" class="section level4">
<h4><span class="header-section-number">5.4.2.3</span> Attribution d’un objet à une classe</h4>
<p>Pour qu’un objet appartient à une classe, il suffit de le déclarer:</p>

<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="chap-package.html#cb332-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb332-2"><a href="chap-package.html#cb332-2"></a><span class="kw">class</span>(x) &lt;-<span class="st"> &quot;MyClass&quot;</span></span>
<span id="cb332-3"><a href="chap-package.html#cb332-3"></a><span class="kw">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;MyClass&quot;</code></pre>

<p>Une façon plus élégante de le faire est d’ajouter la nouvelle classe à l’ensemble des classes auquel l’objet appartient déjà:</p>

<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="chap-package.html#cb334-1"></a>y &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb334-2"><a href="chap-package.html#cb334-2"></a><span class="kw">class</span>(y) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;MyClass&quot;</span>, <span class="kw">class</span>(y))</span>
<span id="cb334-3"><a href="chap-package.html#cb334-3"></a><span class="kw">class</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;MyClass&quot; &quot;numeric&quot;</code></pre>

<p>Il n’y a aucune vérification de cohérence entre la structure réelle de l’objet et une structure de la classe qui serait déclarée ailleurs: le développeur doit s’assurer que les méthodes trouveront bien les bonnes données dans les objets qui déclarent lui appartenir.
Dans le cas contraire, des erreurs se produisent:</p>

<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="chap-package.html#cb336-1"></a><span class="kw">class</span>(y) &lt;-<span class="st"> &quot;lm&quot;</span></span>
<span id="cb336-2"><a href="chap-package.html#cb336-2"></a><span class="kw">tryCatch</span>(<span class="kw">print</span>(y), <span class="dt">error =</span> <span class="cf">function</span>(e) <span class="kw">print</span>(e))</span></code></pre></div>
<pre><code>## &lt;simpleError: $ operator is invalid for atomic vectors&gt;</code></pre>

</div>
</div>
<div id="en-pratique" class="section level3">
<h3><span class="header-section-number">5.4.3</span> En pratique</h3>
<div id="création-dune-méthode-générique" class="section level4">
<h4><span class="header-section-number">5.4.3.1</span> Création d’une méthode générique</h4>
<p>De nouvelles méthodes génériques peuvent être créées et déclinées selon les classes.</p>
<p>A titre d’exemple, créons une méthode générique <code>triple</code> qui calculera le triple des valeurs dans le package <strong>multiple</strong>, déclinée en deux fonctions distinctes: une pour les entiers et une pour les réels.
Les calculs sur les nombres entiers plus rapides que ceux sur les réels, ce qui justifie l’effort d’écrire deux versions du code.</p>

<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="chap-package.html#cb338-1"></a><span class="co"># Méthode générique</span></span>
<span id="cb338-2"><a href="chap-package.html#cb338-2"></a>triple &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</span>
<span id="cb338-3"><a href="chap-package.html#cb338-3"></a>    <span class="kw">UseMethod</span>(<span class="st">&quot;triple&quot;</span>)</span>
<span id="cb338-4"><a href="chap-package.html#cb338-4"></a>}</span></code></pre></div>

<p>La méthode générique ne contient pas de code au-delà de sa déclaration.
Sa signature (c’est-à-dire l’ensemble de ses arguments) est importante parce que les fonctions dérivées de cette méthode devront obligatoirement avoir les mêmes arguments dans le même ordre et pourront seulement ajouter des arguments supplémentaires avant <code>...</code> (qui est obligatoire).
Comme la nature du premier argument dépendra de la classe de chaque objet, l’usage est de l’appeler <code>x</code>.</p>
<p>La méthode est déclinée en deux fonctions:</p>

<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="chap-package.html#cb339-1"></a>triple.integer&lt;-<span class="st"> </span><span class="cf">function</span> (x, ...){</span>
<span id="cb339-2"><a href="chap-package.html#cb339-2"></a>  <span class="kw">return</span>(x <span class="op">*</span><span class="st"> </span>3L)</span>
<span id="cb339-3"><a href="chap-package.html#cb339-3"></a>}</span>
<span id="cb339-4"><a href="chap-package.html#cb339-4"></a>triple.numeric&lt;-<span class="st"> </span><span class="cf">function</span> (x, ...){</span>
<span id="cb339-5"><a href="chap-package.html#cb339-5"></a>  <span class="kw">return</span>(x <span class="op">*</span><span class="st"> </span><span class="fl">3.0</span>)</span>
<span id="cb339-6"><a href="chap-package.html#cb339-6"></a>}</span></code></pre></div>

<p>Dans sa version entière, <code>x</code> est multiplié par <code>3L</code>, le suffixe <code>L</code> signifiant que 3 doit être compris comme un entier.
Dans sa version réelle, 3 est noté <code>3.0</code> pour montrer clairement qu’il s’agit d’un réel.
Sous R, <code>3</code> sans autre précision est compris comme un réel.</p>
<p>Le choix de la fonction dépend de la classe de l’objet passé en argument.</p>

<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="chap-package.html#cb340-1"></a><span class="co"># Argument entier</span></span>
<span id="cb340-2"><a href="chap-package.html#cb340-2"></a><span class="kw">class</span>(2L)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="chap-package.html#cb342-1"></a><span class="co"># Résultat entier par la fonction triple.integer</span></span>
<span id="cb342-2"><a href="chap-package.html#cb342-2"></a><span class="kw">class</span>(<span class="kw">triple</span>(2L))</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="chap-package.html#cb344-1"></a><span class="co"># Argument réel</span></span>
<span id="cb344-2"><a href="chap-package.html#cb344-2"></a><span class="kw">class</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="chap-package.html#cb346-1"></a><span class="co"># Résultat réel par la fonction triple.numeric</span></span>
<span id="cb346-2"><a href="chap-package.html#cb346-2"></a><span class="kw">class</span>(<span class="kw">triple</span>(<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="chap-package.html#cb348-1"></a><span class="co"># Performance</span></span>
<span id="cb348-2"><a href="chap-package.html#cb348-2"></a>microbenchmark<span class="op">::</span><span class="kw">microbenchmark</span>(<span class="kw">triple.integer</span>(2L), <span class="kw">triple.numeric</span>(<span class="dv">2</span>), </span>
<span id="cb348-3"><a href="chap-package.html#cb348-3"></a>    <span class="kw">triple</span>(2L))</span></code></pre></div>
<pre><code>## Unit: nanoseconds
##                expr  min     lq     mean median   uq
##  triple.integer(2L)  319  332.5   378.27  349.0  368
##   triple.numeric(2)  317  332.0 18373.50  357.0  388
##          triple(2L) 1279 1320.0 22797.79 1339.5 1417
##      max neval
##     1113   100
##  1798911   100
##  2127540   100</code></pre>

<p>La mesure des performances par le package <strong>microbenchmark</strong> ne montre pas de différence entre les fonctions <code>triple.integer()</code> et <code>triple.numeric</code> comme attendu parce que le temps consacré au calcul lui-même est négligeable en comparaison du temps d’appel de la fonction.
La méthode générique consomme beaucoup plus de temps que les calculs très simples ici.
R teste en effet l’existence de fonctions correspondant à la classe de l’objet passé en argument aux méthodes génériques.
Comme un objet peut appartenir à plusieurs classes, il recherche une fonction adaptée à la première classe, puis aux classes suivantes successivement.
Cette recherche prend beaucoup de temps et justifie de réserver l’usage de méthodes génériques à la lisibilité du code plutôt qu’à une recherche de performance: l’intérêt des méthodes génériques est de fournir à l’utilisateur du code une seule fonction pour un objectif donné (<code>plot</code> pour réaliser une figure) quelles que soient les données à traiter.</p>
</div>
<div id="création-dune-classe" class="section level4">
<h4><span class="header-section-number">5.4.3.2</span> Création d’une classe</h4>
<p>Dans un package, on créera des classes si les résultats des fonctions le justifient: structure de liste et identification de la classe à un objet (“lm” est la classe des modèles linéaires).
Pour toute classe créée, les méthodes <code>print</code>, <code>summary</code> et <code>plot</code> (si une représentation graphique est possible) doivent être écrites.</p>
<p>Ecrivons une fonction <code>multiple()</code> dont le résultat sera un objet d’une nouvelle classe, “multiple”, qui sera une liste mémorisant les valeurs à multiplier, le multiplicateur et le résultat.</p>

<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="chap-package.html#cb350-1"></a>multiple &lt;-<span class="st"> </span><span class="cf">function</span>(number, <span class="dt">times =</span> <span class="dv">1</span>) {</span>
<span id="cb350-2"><a href="chap-package.html#cb350-2"></a>    <span class="co"># Calculate the multiples</span></span>
<span id="cb350-3"><a href="chap-package.html#cb350-3"></a>    y &lt;-<span class="st"> </span>number <span class="op">*</span><span class="st"> </span>times</span>
<span id="cb350-4"><a href="chap-package.html#cb350-4"></a>    <span class="co"># Save in a list</span></span>
<span id="cb350-5"><a href="chap-package.html#cb350-5"></a>    result &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> number, <span class="dt">y =</span> y, <span class="dt">times =</span> times)</span>
<span id="cb350-6"><a href="chap-package.html#cb350-6"></a>    <span class="co"># Set the class</span></span>
<span id="cb350-7"><a href="chap-package.html#cb350-7"></a>    <span class="kw">class</span>(result) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;multiple&quot;</span>, <span class="kw">class</span>(result))</span>
<span id="cb350-8"><a href="chap-package.html#cb350-8"></a>    <span class="kw">return</span>(result)</span>
<span id="cb350-9"><a href="chap-package.html#cb350-9"></a>}</span>
<span id="cb350-10"><a href="chap-package.html#cb350-10"></a><span class="co"># Classe du résultat</span></span>
<span id="cb350-11"><a href="chap-package.html#cb350-11"></a>my_multiple &lt;-<span class="st"> </span><span class="kw">multiple</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb350-12"><a href="chap-package.html#cb350-12"></a><span class="kw">class</span>(my_multiple)</span></code></pre></div>
<pre><code>## [1] &quot;multiple&quot; &quot;list&quot;</code></pre>

<p>L’appel à la fonction <code>multiple()</code> renvoie un objet de classe “multiple”, qui est aussi de classe “list”.
En absence de fonction <code>print.multiple()</code>, R cherche la fonction <code>print.list()</code> qui n’existe pas et se rabat sur la fonction <code>print.default()</code>:</p>

<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="chap-package.html#cb352-1"></a>my_multiple</span></code></pre></div>
<pre><code>## $x
## [1] 1 2 3
## 
## $y
## [1] 2 4 6
## 
## $times
## [1] 2
## 
## attr(,&quot;class&quot;)
## [1] &quot;multiple&quot; &quot;list&quot;</code></pre>

<p>La fonction <code>print.multiple</code> doit donc être écrite pour un affichage lisible, limité au résultat:</p>

<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="chap-package.html#cb354-1"></a>print.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</span>
<span id="cb354-2"><a href="chap-package.html#cb354-2"></a>    <span class="kw">print.default</span>(x<span class="op">$</span>y)</span>
<span id="cb354-3"><a href="chap-package.html#cb354-3"></a>}</span>
<span id="cb354-4"><a href="chap-package.html#cb354-4"></a><span class="co"># Nouvel affichage</span></span>
<span id="cb354-5"><a href="chap-package.html#cb354-5"></a>my_multiple</span></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>

<p>Les détails peuvent être présentés dans la fonction <code>summary</code>:</p>

<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="chap-package.html#cb356-1"></a>summary.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(object, ...) {</span>
<span id="cb356-2"><a href="chap-package.html#cb356-2"></a>    <span class="kw">print.default</span>(object<span class="op">$</span>x)</span>
<span id="cb356-3"><a href="chap-package.html#cb356-3"></a>    <span class="kw">cat</span>(<span class="st">&quot;multiplied by&quot;</span>, object<span class="op">$</span>times, <span class="st">&quot;is:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb356-4"><a href="chap-package.html#cb356-4"></a>    <span class="kw">print.default</span>(object<span class="op">$</span>y)</span>
<span id="cb356-5"><a href="chap-package.html#cb356-5"></a>}</span>
<span id="cb356-6"><a href="chap-package.html#cb356-6"></a><span class="co"># Nouvel affichage</span></span>
<span id="cb356-7"><a href="chap-package.html#cb356-7"></a><span class="kw">summary</span>(my_multiple)</span></code></pre></div>
<pre><code>## [1] 1 2 3
## multiplied by 2 is:
## [1] 2 4 6</code></pre>

<p>Enfin, une fonction <code>plot</code> et une fonction <code>autoplot</code> complètent l’ensemble:</p>

<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="chap-package.html#cb358-1"></a>plot.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {</span>
<span id="cb358-2"><a href="chap-package.html#cb358-2"></a>  <span class="kw">plot.default</span>(<span class="dt">y=</span>x<span class="op">$</span>y, <span class="dt">x=</span>x<span class="op">$</span>x, <span class="dt">type =</span> <span class="st">&quot;p&quot;</span>, </span>
<span id="cb358-3"><a href="chap-package.html#cb358-3"></a>    <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">&quot;Multiplication by&quot;</span>, x<span class="op">$</span>times), ...)</span>
<span id="cb358-4"><a href="chap-package.html#cb358-4"></a>}</span>
<span id="cb358-5"><a href="chap-package.html#cb358-5"></a></span>
<span id="cb358-6"><a href="chap-package.html#cb358-6"></a>autoplot.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(object, ...) {</span>
<span id="cb358-7"><a href="chap-package.html#cb358-7"></a>  <span class="kw">data.frame</span>(<span class="dt">x =</span> object<span class="op">$</span>x, <span class="dt">y =</span> object<span class="op">$</span>y) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb358-8"><a href="chap-package.html#cb358-8"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb358-9"><a href="chap-package.html#cb358-9"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(ggplot2<span class="op">::</span><span class="kw">aes_</span>(<span class="dt">x =</span> <span class="op">~</span>x, <span class="dt">y =</span> <span class="op">~</span>y)) <span class="op">+</span></span>
<span id="cb358-10"><a href="chap-package.html#cb358-10"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="kw">paste</span>(<span class="st">&quot;Multiplication by&quot;</span>, </span>
<span id="cb358-11"><a href="chap-package.html#cb358-11"></a>                                object<span class="op">$</span>times))</span>
<span id="cb358-12"><a href="chap-package.html#cb358-12"></a>}</span>
<span id="cb358-13"><a href="chap-package.html#cb358-13"></a></span>
<span id="cb358-14"><a href="chap-package.html#cb358-14"></a><span class="kw">plot</span>(my_multiple)</span></code></pre></div>
<p><img src="travailleR_files/figure-html/unnamed-chunk-96-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="chap-package.html#cb359-1"></a><span class="kw">autoplot</span>(my_multiple)</span></code></pre></div>
<p><img src="travailleR_files/figure-html/unnamed-chunk-96-2.png" width="80%" style="display: block; margin: auto;" /></p>

<p>Pour des raisons techniques liées à l’évaluation non conventionnelle dans le tidyverse, les fonctions <code>aes()</code> doivent être remplacées par <code>aes_()</code> dans les packages et ajouter un <code>~</code> devant les noms des variables.
Dans le cas contraire, la vérification du package renvoie une note indiquant que les variables <code>x</code> et <code>y</code>, utilisées par les arguments de <code>aes()</code> n’ont pas été déclarées et n’existent peut-être pas dans l’environnement local (voir section <a href="chap-utiliseR.html#sec:environnements">2.2</a>).</p>
</div>
<div id="documentation" class="section level4">
<h4><span class="header-section-number">5.4.3.3</span> Documentation</h4>
<p>Les méthodes génériques et les fonctions qui les déclinent doivent être documentées comme n’importe quelle autre fonction.</p>
<p>La gestion de l’espace des noms est un peu plus complexe:</p>
<ul>
<li>Les méthodes génériques doivent être exportées:</li>
</ul>
<pre><code>#&#39; @export</code></pre>
<ul>
<li>Les fonctions dérivées de méthodes génériques ne doivent pas l’être mais être déclarées comme méthode, avec le nom de la méthode générique et la classe traitée. Etrangement, <strong>roxygen2</strong> demande qu’une directive d’exportation soit ajoutée mais ne l’applique pas (comme il se doit) dans le fichier <code>NAMESPACE</code> qui est utilisé par R:</li>
</ul>
<pre><code>#&#39; @method plot multiple
#&#39; @export</code></pre>
<ul>
<li>Les fonctions dérivées de méthodes génériques venant d’un autre package nécessitent d’importer la méthode générique si elle n’est pas fournie par <strong>base</strong> (<code>print</code> est fourni par <strong>base</strong> et n’est donc pas concerné):</li>
</ul>

<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="chap-package.html#cb362-1"></a><span class="co">#&#39; @importFrom graphics plot</span></span>
<span id="cb362-2"><a href="chap-package.html#cb362-2"></a><span class="co">#&#39; @importFrom ggplot2 autoplot</span></span></code></pre></div>

<p>Dans <code>DESCRIPTION</code>, le package d’origine de chaque générique doit être listé dans la directive <code>Depends:</code>, pas dans <code>Imports:</code>:</p>
<pre><code>Depends: R (&gt;= 2.10), ggplot2, graphics</code></pre>
<p>Enfin, l’importation de fonctions du tidyverse nécessite aussi quelques précautions:</p>
<ul>
<li>le package<strong>tidyverse</strong> est réservé à l’usage interactif de R: il n’est pas question de l’importer dans <code>DESCRIPTION</code> parce que ses dépendances peuvent changer et aboutir à des résultats imprévisibles;</li>
<li>Le package <strong>magrittr</strong> fournit les tuyaux, principalement <code>%&gt;%</code>.
Il doit être importé dans <code>DESCRIPTION</code>.</li>
</ul>
<pre><code>Imports: magrittr, stats</code></pre>
<ul>
<li>Comme il n’est pas possible de les préfixer <code>%&gt;%</code> par le nom du package, il faut importer la fonction en utilisant les délimiteurs prévus pour les fonctions dont le nom contient des caractères spéciaux:</li>
</ul>

<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="chap-package.html#cb365-1"></a><span class="co">#&#39; @importFrom magrittr `%&gt;%`</span></span></code></pre></div>

<p>Finalement, le code complet est le suivant:</p>

<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="chap-package.html#cb366-1"></a><span class="co">#&#39; Multiplication of a numeric vector</span></span>
<span id="cb366-2"><a href="chap-package.html#cb366-2"></a><span class="co">#&#39;</span></span>
<span id="cb366-3"><a href="chap-package.html#cb366-3"></a><span class="co">#&#39; @param number a numeric vector</span></span>
<span id="cb366-4"><a href="chap-package.html#cb366-4"></a><span class="co">#&#39; @param times a number to multiply</span></span>
<span id="cb366-5"><a href="chap-package.html#cb366-5"></a><span class="co">#&#39;</span></span>
<span id="cb366-6"><a href="chap-package.html#cb366-6"></a><span class="co">#&#39; @return an object of class `multiple`</span></span>
<span id="cb366-7"><a href="chap-package.html#cb366-7"></a><span class="co">#&#39; @export</span></span>
<span id="cb366-8"><a href="chap-package.html#cb366-8"></a><span class="co">#&#39;</span></span>
<span id="cb366-9"><a href="chap-package.html#cb366-9"></a><span class="co">#&#39; @examples</span></span>
<span id="cb366-10"><a href="chap-package.html#cb366-10"></a><span class="co">#&#39; multiple(1:2,3)</span></span>
<span id="cb366-11"><a href="chap-package.html#cb366-11"></a>multiple &lt;-<span class="st"> </span><span class="cf">function</span>(number, <span class="dt">times =</span> <span class="dv">1</span>) {</span>
<span id="cb366-12"><a href="chap-package.html#cb366-12"></a>  <span class="co"># Calculate the multiples</span></span>
<span id="cb366-13"><a href="chap-package.html#cb366-13"></a>  y &lt;-<span class="st"> </span>number <span class="op">*</span><span class="st"> </span>times</span>
<span id="cb366-14"><a href="chap-package.html#cb366-14"></a>  <span class="co"># Save in a list</span></span>
<span id="cb366-15"><a href="chap-package.html#cb366-15"></a>  result &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> number, <span class="dt">y =</span> y, <span class="dt">times =</span> times)</span>
<span id="cb366-16"><a href="chap-package.html#cb366-16"></a>  <span class="co"># Set the class</span></span>
<span id="cb366-17"><a href="chap-package.html#cb366-17"></a>  <span class="kw">class</span>(result) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;multiple&quot;</span>, <span class="kw">class</span>(result))</span>
<span id="cb366-18"><a href="chap-package.html#cb366-18"></a>  <span class="kw">return</span>(result)</span>
<span id="cb366-19"><a href="chap-package.html#cb366-19"></a>}</span>
<span id="cb366-20"><a href="chap-package.html#cb366-20"></a></span>
<span id="cb366-21"><a href="chap-package.html#cb366-21"></a><span class="co">#&#39; Print objects of class multiple</span></span>
<span id="cb366-22"><a href="chap-package.html#cb366-22"></a><span class="co">#&#39;</span></span>
<span id="cb366-23"><a href="chap-package.html#cb366-23"></a><span class="co">#&#39; @param x an object of class `multiple`.</span></span>
<span id="cb366-24"><a href="chap-package.html#cb366-24"></a><span class="co">#&#39; @param ... further arguments passed to the generic method.</span></span>
<span id="cb366-25"><a href="chap-package.html#cb366-25"></a><span class="co">#&#39;</span></span>
<span id="cb366-26"><a href="chap-package.html#cb366-26"></a><span class="co">#&#39; @export</span></span>
<span id="cb366-27"><a href="chap-package.html#cb366-27"></a><span class="co">#&#39;</span></span>
<span id="cb366-28"><a href="chap-package.html#cb366-28"></a><span class="co">#&#39; @examples</span></span>
<span id="cb366-29"><a href="chap-package.html#cb366-29"></a><span class="co">#&#39; print(multiple(2,3))</span></span>
<span id="cb366-30"><a href="chap-package.html#cb366-30"></a>print.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</span>
<span id="cb366-31"><a href="chap-package.html#cb366-31"></a>  <span class="kw">print.default</span>(x<span class="op">$</span>y)</span>
<span id="cb366-32"><a href="chap-package.html#cb366-32"></a>}</span>
<span id="cb366-33"><a href="chap-package.html#cb366-33"></a></span>
<span id="cb366-34"><a href="chap-package.html#cb366-34"></a><span class="co">#&#39; Summarize objects of class multiple</span></span>
<span id="cb366-35"><a href="chap-package.html#cb366-35"></a><span class="co">#&#39;</span></span>
<span id="cb366-36"><a href="chap-package.html#cb366-36"></a><span class="co">#&#39; @param object an object of class `multiple`.</span></span>
<span id="cb366-37"><a href="chap-package.html#cb366-37"></a><span class="co">#&#39; @param ... further arguments passed to the generic method.</span></span>
<span id="cb366-38"><a href="chap-package.html#cb366-38"></a><span class="co">#&#39;</span></span>
<span id="cb366-39"><a href="chap-package.html#cb366-39"></a><span class="co">#&#39; @export</span></span>
<span id="cb366-40"><a href="chap-package.html#cb366-40"></a><span class="co">#&#39;</span></span>
<span id="cb366-41"><a href="chap-package.html#cb366-41"></a><span class="co">#&#39; @examples</span></span>
<span id="cb366-42"><a href="chap-package.html#cb366-42"></a><span class="co">#&#39; summary(multiple(2,3))</span></span>
<span id="cb366-43"><a href="chap-package.html#cb366-43"></a>summary.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(object, ...) {</span>
<span id="cb366-44"><a href="chap-package.html#cb366-44"></a>  <span class="kw">print.default</span>(object<span class="op">$</span>x)</span>
<span id="cb366-45"><a href="chap-package.html#cb366-45"></a>  <span class="kw">cat</span>(<span class="st">&quot;multiplied by&quot;</span>, object<span class="op">$</span>times, <span class="st">&quot;is:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb366-46"><a href="chap-package.html#cb366-46"></a>  <span class="kw">print.default</span>(object<span class="op">$</span>y)</span>
<span id="cb366-47"><a href="chap-package.html#cb366-47"></a>}</span>
<span id="cb366-48"><a href="chap-package.html#cb366-48"></a></span>
<span id="cb366-49"><a href="chap-package.html#cb366-49"></a></span>
<span id="cb366-50"><a href="chap-package.html#cb366-50"></a><span class="co">#&#39; Plot objects of class multiple</span></span>
<span id="cb366-51"><a href="chap-package.html#cb366-51"></a><span class="co">#&#39;</span></span>
<span id="cb366-52"><a href="chap-package.html#cb366-52"></a><span class="co">#&#39; @param x a vector of numbers</span></span>
<span id="cb366-53"><a href="chap-package.html#cb366-53"></a><span class="co">#&#39; @param y a vector of multiplied numbers</span></span>
<span id="cb366-54"><a href="chap-package.html#cb366-54"></a><span class="co">#&#39; @param ... further arguments passed to the generic method.</span></span>
<span id="cb366-55"><a href="chap-package.html#cb366-55"></a><span class="co">#&#39;</span></span>
<span id="cb366-56"><a href="chap-package.html#cb366-56"></a><span class="co">#&#39; @importFrom graphics plot</span></span>
<span id="cb366-57"><a href="chap-package.html#cb366-57"></a><span class="co">#&#39; @export</span></span>
<span id="cb366-58"><a href="chap-package.html#cb366-58"></a><span class="co">#&#39;</span></span>
<span id="cb366-59"><a href="chap-package.html#cb366-59"></a><span class="co">#&#39; @examples</span></span>
<span id="cb366-60"><a href="chap-package.html#cb366-60"></a><span class="co">#&#39; plot(multiple(2,3))</span></span>
<span id="cb366-61"><a href="chap-package.html#cb366-61"></a>plot.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {</span>
<span id="cb366-62"><a href="chap-package.html#cb366-62"></a>  <span class="kw">plot.default</span>(<span class="dt">y=</span>x<span class="op">$</span>y, <span class="dt">x=</span>x<span class="op">$</span>x, <span class="dt">type =</span> <span class="st">&quot;p&quot;</span>, </span>
<span id="cb366-63"><a href="chap-package.html#cb366-63"></a>               <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">&quot;Multiplication by&quot;</span>, x<span class="op">$</span>times), ...)</span>
<span id="cb366-64"><a href="chap-package.html#cb366-64"></a>}</span>
<span id="cb366-65"><a href="chap-package.html#cb366-65"></a></span>
<span id="cb366-66"><a href="chap-package.html#cb366-66"></a></span>
<span id="cb366-67"><a href="chap-package.html#cb366-67"></a><span class="co">#&#39; autoplot</span></span>
<span id="cb366-68"><a href="chap-package.html#cb366-68"></a><span class="co">#&#39;</span></span>
<span id="cb366-69"><a href="chap-package.html#cb366-69"></a><span class="co">#&#39; ggplot of the `multiple` objects.</span></span>
<span id="cb366-70"><a href="chap-package.html#cb366-70"></a><span class="co">#&#39;</span></span>
<span id="cb366-71"><a href="chap-package.html#cb366-71"></a><span class="co">#&#39; @param object an object of class `multiple`.</span></span>
<span id="cb366-72"><a href="chap-package.html#cb366-72"></a><span class="co">#&#39; @param ... ignored.</span></span>
<span id="cb366-73"><a href="chap-package.html#cb366-73"></a><span class="co">#&#39;</span></span>
<span id="cb366-74"><a href="chap-package.html#cb366-74"></a><span class="co">#&#39; @return a `ggplot` object</span></span>
<span id="cb366-75"><a href="chap-package.html#cb366-75"></a><span class="co">#&#39; @importFrom ggplot2 autoplot</span></span>
<span id="cb366-76"><a href="chap-package.html#cb366-76"></a><span class="co">#&#39; @importFrom magrittr `%&gt;%`</span></span>
<span id="cb366-77"><a href="chap-package.html#cb366-77"></a><span class="co">#&#39; @export</span></span>
<span id="cb366-78"><a href="chap-package.html#cb366-78"></a><span class="co">#&#39;</span></span>
<span id="cb366-79"><a href="chap-package.html#cb366-79"></a><span class="co">#&#39; @examples</span></span>
<span id="cb366-80"><a href="chap-package.html#cb366-80"></a><span class="co">#&#39; autoplot(multiple(2,3))</span></span>
<span id="cb366-81"><a href="chap-package.html#cb366-81"></a>autoplot.multiple &lt;-<span class="st"> </span><span class="cf">function</span>(object, ...) {</span>
<span id="cb366-82"><a href="chap-package.html#cb366-82"></a>  <span class="kw">data.frame</span>(<span class="dt">x =</span> object<span class="op">$</span>x, <span class="dt">y =</span> object<span class="op">$</span>y) <span class="op">%&gt;%</span></span>
<span id="cb366-83"><a href="chap-package.html#cb366-83"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb366-84"><a href="chap-package.html#cb366-84"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(ggplot2<span class="op">::</span><span class="kw">aes_</span>(<span class="dt">x =</span> <span class="op">~</span>x, <span class="dt">y =</span> <span class="op">~</span>y)) <span class="op">+</span></span>
<span id="cb366-85"><a href="chap-package.html#cb366-85"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="kw">paste</span>(<span class="st">&quot;Multiplication by&quot;</span>, </span>
<span id="cb366-86"><a href="chap-package.html#cb366-86"></a>                                object<span class="op">$</span>times))</span>
<span id="cb366-87"><a href="chap-package.html#cb366-87"></a>}</span></code></pre></div>

</div>
</div>
<div id="code-c" class="section level3">
<h3><span class="header-section-number">5.4.4</span> Code C++</h3>
<p>L’utilisation de code C++ a été vue en section <a href="chap-utiliseR.html#sec:cpp">2.5</a>.
Pour intégrer ces fonctions dans un packages, il faut respecter les règles suivantes:</p>
<ul>
<li>les fichiers <code>.cpp</code> contenant le code sont placés dans le dossier <code>/src</code> du projet;</li>
<li>le code est commenté pour <strong>roxygen2</strong> de la même façon que les fonctions R, mais avec le marqueur de commentaire du langage C:</li>
</ul>

<div class="sourceCode" id="cb367"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb367-1"><a href="chap-package.html#cb367-1"></a><span class="pp">#include </span><span class="im">&lt;Rcpp.h&gt;</span></span>
<span id="cb367-2"><a href="chap-package.html#cb367-2"></a><span class="kw">using</span> <span class="kw">namespace</span> Rcpp;</span>
<span id="cb367-3"><a href="chap-package.html#cb367-3"></a></span>
<span id="cb367-4"><a href="chap-package.html#cb367-4"></a><span class="co">//&#39; timesTwo</span></span>
<span id="cb367-5"><a href="chap-package.html#cb367-5"></a><span class="co">//&#39;</span></span>
<span id="cb367-6"><a href="chap-package.html#cb367-6"></a><span class="co">//&#39; Calculates the double of a value.</span></span>
<span id="cb367-7"><a href="chap-package.html#cb367-7"></a><span class="co">//&#39;</span></span>
<span id="cb367-8"><a href="chap-package.html#cb367-8"></a><span class="co">//&#39; @param x A numeric vector.</span></span>
<span id="cb367-9"><a href="chap-package.html#cb367-9"></a><span class="co">//&#39; @export</span></span>
<span id="cb367-10"><a href="chap-package.html#cb367-10"></a><span class="co">// [[Rcpp::export]]</span></span>
<span id="cb367-11"><a href="chap-package.html#cb367-11"></a>NumericVector timesTwo(NumericVector x) {</span>
<span id="cb367-12"><a href="chap-package.html#cb367-12"></a>  <span class="cf">return</span> x * <span class="dv">2</span>;</span>
<span id="cb367-13"><a href="chap-package.html#cb367-13"></a>}</span></code></pre></div>

<ul>
<li>dans <code>DESCRIPTION</code>, importer les packages.
<strong>Rcpp</strong>, et <strong>RcppParallel</strong> si du code parallélisé est utilisé (supprimer ses références sinon), doivent être déclarés dans <code>LinkingTo</code>:</li>
</ul>
<pre><code>Imports: Rcpp, RcppParallel
LinkingTo: Rcpp, RcppParallel</code></pre>
<ul>
<li>les commentaires pour <strong>roxygen2</strong> doivent être ajoutés à <code>package.R</code> (“multiple” est le nom du package):</li>
</ul>

<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="chap-package.html#cb369-1"></a><span class="co">#&#39; @importFrom Rcpp sourceCpp</span></span>
<span id="cb369-2"><a href="chap-package.html#cb369-2"></a><span class="co">#&#39; @importFrom RcppParallel RcppParallelLibs</span></span>
<span id="cb369-3"><a href="chap-package.html#cb369-3"></a><span class="co">#&#39; @useDynLib multiple, .registration = TRUE</span></span></code></pre></div>

<ul>
<li>les fichiers de travail de C++ sont exclus du contrôle de source dans <code>.gitignore</code>:</li>
</ul>
<pre><code># C binaries
src/*.o
src/*.so
src/*.dll</code></pre>
<p>Ces modifications sont en partie effectuées automatiquement, pour <strong>Rcpp</strong> seulement, par <strong>usethis</strong>, mais l’insertion manuelle du code est plus rapide et fiable: ne pas utiliser cette commande.</p>

<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="chap-package.html#cb371-1"></a><span class="co"># usethis::use_rcpp()</span></span></code></pre></div>

<p>La construction du package entraînera la compilation du code: les Rtools sont donc indispensables.</p>
</div>
<div id="package-bien-rangé" class="section level3">
<h3><span class="header-section-number">5.4.5</span> Package bien rangé</h3>
<p>Tout package moderne doit être compatible avec le tidyverse, ce qui nécessite peu d’efforts:</p>
<ul>
<li>pour permettre l’utilisation de pipelines, l’argument principal des fonctions doit être le premier;</li>
<li>les fonctions qui transforment des données doivent accepter un dataframe ou un tibble comme premier argument et retourner un objet du même format;</li>
<li>les méthodes <code>plot()</code> doivent être doublées de méthodes <code>autoplot()</code> avec les mêmes arguments qui produisent le même graphique avec <strong>ggplot2</strong>.</li>
</ul>
</div>
</div>
<div id="bibliographie-1" class="section level2">
<h2><span class="header-section-number">5.5</span> Bibliographie</h2>
<p>La documentation d’un package fait appel à des références bibliographiques.
Elles peuvent être gérées automatiquement avec <strong>Rdpack</strong> et <strong>roxygen2</strong>.
Les références utilisées dans les fichiers R Markdown (vignette, site produit par <strong>pkgdown</strong>) ne sont pas concernées.</p>
<div id="préparation" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Préparation</h3>
<p>Les références bibliographiques doivent être placées dans un fichier bibtex <code>REFERENCES.bib</code> placé dans le dossier <code>inst</code>.
Ce dossier contient des fichiers qui seront placés à la racine du dossier du package quand il sera installé.</p>
<p>Ajouter la ligne suivante à <code>DESCRIPTION</code>:</p>
<pre><code>RdMacros: Rdpack</code></pre>
<p>Ajouter aussi le package <code>Rdpack</code> à la liste des packages importés:</p>
<pre><code>Imports: magrittr, stats, Rcpp, Rdpack</code></pre>
<p>Enfin, importer la fonction <code>reprompt()</code> de <strong>Rdpack</strong> en ajoutant les lignes suivantes à la documentation pour <strong>roxygen2</strong> dans <code>package.R</code>:</p>

<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="chap-package.html#cb374-1"></a><span class="co">#&#39; @importFrom Rdpack reprompt</span></span></code></pre></div>

</div>
<div id="citations" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Citations</h3>
<p>Les références sont citées en utilisant la commande <code>\insertCite{key}{package}</code> dans la documentation destinée à <strong>roxygen2</strong>.
<code>package</code> est le nom du package dans lequel le fichier <code>REFERENCES.bib</code> doit être cherché: ce sera normalement le package en cours, mais les références d’autres packages sont accessibles, à la seule condition qu’ils utilisent <strong>Rdpack</strong>.</p>
<p><code>key</code> est l’identifiant de la référence dans le fichier.
Exemple<a href="#fn90" class="footnote-ref" id="fnref90"><sup>90</sup></a>: documentation du package <strong>SpatDiv</strong> hébergé sur GitHub, fichier <code>.R</code> du package:</p>

<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="chap-package.html#cb375-1"></a><span class="co">#&#39; SpatDiv</span></span>
<span id="cb375-2"><a href="chap-package.html#cb375-2"></a><span class="co">#&#39;</span></span>
<span id="cb375-3"><a href="chap-package.html#cb375-3"></a><span class="co">#&#39; Spatially Explicit Measures of Diversity</span></span>
<span id="cb375-4"><a href="chap-package.html#cb375-4"></a><span class="co">#&#39; </span></span>
<span id="cb375-5"><a href="chap-package.html#cb375-5"></a><span class="co">#&#39; This package extends the **entropart** package</span></span>
<span id="cb375-6"><a href="chap-package.html#cb375-6"></a><span class="co">#&#39; \insertCite{Marcon2014c}{SpatDiv}.</span></span>
<span id="cb375-7"><a href="chap-package.html#cb375-7"></a><span class="co">#&#39; It provides spatially explicit measures of </span></span>
<span id="cb375-8"><a href="chap-package.html#cb375-8"></a><span class="co">#&#39; diversity such as the mixing index.</span></span></code></pre></div>

<p>La référence citée se trouve dans <code>inst/REFERENCES.bib</code>:</p>
<pre><code>@Article{Marcon2014c,
  author  = {Marcon, Eric and Herault, Bruno},
  title   = {entropart, an R Package to Partition 
             Diversity},
  journal = {Journal of Statistical Software},
  year    = {2015},
  volume  = {67},
  number  = {8},
  pages   = {1--26},
}</code></pre>
<p>Les citations sont entre parenthèses.
Pour placer le nom de l’auteur hors de la parenthèse, ajouter la déclaration <code>;textual</code>:</p>
<pre><code>\insertCite{Marcon2014c;textual}{SpatDiv}</code></pre>
<p>Pour citer plusieurs références (forcément du même package), les séparer par des virgules.</p>
<p>A la fin de la documentation d’un objet utilisant des citations, ajouter systématiquement une liste des références:</p>

<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="chap-package.html#cb378-1"></a><span class="co">#&#39; @references</span></span>
<span id="cb378-2"><a href="chap-package.html#cb378-2"></a><span class="co">#&#39; \insertAllCited{}</span></span></code></pre></div>

</div>
</div>
<div id="données" class="section level2">
<h2><span class="header-section-number">5.6</span> Données</h2>
<p>Des données peuvent être intégrées à un package, notamment pour la clarté des exemples.</p>
<p>La méthode la plus simple consiste à utiliser <strong>use_this</strong>.
Créer des variables contenant les données à sauvegarder puis les sauvegarder:</p>

<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="chap-package.html#cb379-1"></a>seq1_<span class="dv">10</span> &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb379-2"><a href="chap-package.html#cb379-2"></a>seq1_<span class="dv">100</span> &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span></span>
<span id="cb379-3"><a href="chap-package.html#cb379-3"></a>usethis<span class="op">::</span><span class="kw">use_data</span>(seq1_<span class="dv">10</span>, seq1_<span class="dv">100</span>)</span></code></pre></div>

<p>Un fichier <code>.rda</code> est créé dans le dossier <code>data</code> pour chaque variable créée.
Avec l’option <code>LazyData</code> activée dans <code>DESCRIPTION</code>, les variables seront disponibles dès le chargement du package, mais ne seront effectivement chargées en mémoire qu’après leur première utilisation.</p>
<p>Chaque variable doit être documentée dans le fichier <code>package.R</code>:</p>

<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="chap-package.html#cb380-1"></a><span class="co">#&#39; seq1_10</span></span>
<span id="cb380-2"><a href="chap-package.html#cb380-2"></a><span class="co">#&#39;</span></span>
<span id="cb380-3"><a href="chap-package.html#cb380-3"></a><span class="co">#&#39; A sequence of numbers from 1 to 10</span></span>
<span id="cb380-4"><a href="chap-package.html#cb380-4"></a><span class="co">#&#39;</span></span>
<span id="cb380-5"><a href="chap-package.html#cb380-5"></a><span class="co">#&#39; @format A numeric vector.</span></span>
<span id="cb380-6"><a href="chap-package.html#cb380-6"></a><span class="co">#&#39; @source Values computed by the R software, </span></span>
<span id="cb380-7"><a href="chap-package.html#cb380-7"></a><span class="co">#&#39;   \url{https://www.r-project.org/}</span></span>
<span id="cb380-8"><a href="chap-package.html#cb380-8"></a><span class="st">&quot;seq1_10&quot;</span></span></code></pre></div>

<p>Le nom de la variable est donné entre guillemets après le bloc de commentaires (à la place du code R d’une fonction).
<code>@format</code> décrit le format des données et <code>@source</code> permet d’indiquer leur source.</p>
</div>
<div id="tests-unitaires" class="section level2">
<h2><span class="header-section-number">5.7</span> Tests unitaires</h2>
<p>Dans l’idéal, tout le code inclus dans un package devrait être testé de multiples façons:</p>
<ul>
<li>contre les erreurs de syntaxe: les procédures de vérification de R s’en chargent assez bien;</li>
<li>pour vérifier la conformité des résultats de calculs aux valeurs attendues;</li>
<li>contre la survenue d’erreurs si les utilisateurs n’utilisent pas le code comme le développeur l’a prévu (arguments incorrects passés aux fonctions, données inadéquates…).</li>
</ul>
<p>Les tests unitaires sont utilisés dans les deux derniers objectifs.
Ils s’appuient sur <strong>testthat</strong> à intégrer au package:</p>

<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="chap-package.html#cb381-1"></a>usethis<span class="op">::</span><span class="kw">use_testthat</span>()</span></code></pre></div>


<pre><code>## 
## Attaching package: &#39;testthat&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     matches</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     is_null</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     matches</code></pre>

<p>Les tests doivent être ajoutés sous la forme de fichiers <code>.R</code> dont le nom commence obligatoirement par <code>test</code> dans le dossier <code>tests/testthat</code>.</p>
<p>Chaque test (donc le contenu de chaque fichier) commence par son contexte, c’est-à-dire ce un ensemble de tests. Exemple, dans un fichier <code>test_double.R</code>:</p>

<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="chap-package.html#cb386-1"></a><span class="kw">context</span>(<span class="st">&quot;function double&quot;</span>)</span></code></pre></div>

<p>Les tests sont contenus dans des fichiers qui les regroupent par thème, par exemple <code>test_double.R</code>.
Le nom de chaque test est passé comme argument de la fonction <code>test_that())</code>:</p>

<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="chap-package.html#cb387-1"></a><span class="kw">test_that</span>(<span class="st">&quot;Double values are correct&quot;</span>, {</span>
<span id="cb387-2"><a href="chap-package.html#cb387-2"></a>    <span class="kw">skip_on_cran</span>()</span>
<span id="cb387-3"><a href="chap-package.html#cb387-3"></a>    x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span></span>
<span id="cb387-4"><a href="chap-package.html#cb387-4"></a>    <span class="co"># 2 x 2 should be 4</span></span>
<span id="cb387-5"><a href="chap-package.html#cb387-5"></a>    <span class="kw">expect_equal</span>(<span class="kw">double</span>(x), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb387-6"><a href="chap-package.html#cb387-6"></a>    <span class="co"># The result should be a number (type = &#39;double&#39;)</span></span>
<span id="cb387-7"><a href="chap-package.html#cb387-7"></a>    <span class="kw">expect_type</span>(<span class="kw">double</span>(x), <span class="st">&quot;double&quot;</span>)</span>
<span id="cb387-8"><a href="chap-package.html#cb387-8"></a>    <span class="co"># Error management</span></span>
<span id="cb387-9"><a href="chap-package.html#cb387-9"></a>    <span class="kw">expect_error</span>(<span class="kw">double</span>(<span class="st">&quot;a&quot;</span>))</span>
<span id="cb387-10"><a href="chap-package.html#cb387-10"></a>})</span></code></pre></div>
<pre><code>## Test passed 🎊</code></pre>

<p>Toutes les fonctions commençant par <code>expect</code> permettent de comparer leur premier argument à un résultat: dans l’exemple ci-dessus, le résultat de <code>double(1:2)</code> doit être <code>2 4</code> et le type de ce vecteur doit être réel à double précision.
Le dernier test vérifie qu’une chaîne de caractère passée comme argument génère une erreur, ce qui n’est pas optimal: si le package traitait l’erreur, le message retourné pourrait être testé.</p>
<p>La commande <code>skip_on_cran()</code>, à utiliser systématiquement, évite de lancer les tests sur CRAN quand le package y sera déposé: CRAN dispose de ressources limitées et restreint strictement le temps de vérification des packages sur sa plateforme.
Les tests devront donc être réalisés sur GitHub, grâce à l’intégration continue, voir section <a href="chap-package.html#sec:package-ci5">5.9</a>.</p>
<p>Les tests peuvent être lancés par le menu “More &gt; Test package” de la fenêtre <em>Build</em> ou par la commande <code>devtools::test()</code>.</p>
<p>Il est conseillé d’écrire les tests dès qu’une fonction du package est stabilisée.</p>
</div>
<div id="fichier-.gitignore" class="section level2">
<h2><span class="header-section-number">5.8</span> Fichier .gitignore</h2>
<p>Le fichier <code>.gitignore</code> obtenu à ce stade est incomplet.
Il peut être remplacé par celui-ci:</p>
<pre><code># History files
.Rhistory
.Rapp.history
# Session Data files
.RData
# Example code in package build process
*-Ex.R
# Output files from R CMD build
/*.tar.gz
# Output files from R CMD check
/*.Rcheck/
# RStudio files
.Rproj.user/
.Rprofile
# knitr and R markdown default cache directories
*_cache/
/cache/
# Temporary files created by R markdown
*.utf8.md
*.knit.md
# C binaries
src/*.o
src/*.so
src/*.dll
/src-i386/
/src-x64/
# uncomment if pkgdown is run by CI
# docs/</code></pre>
<p>La dernière ligne concerne le dossier <code>docs/</code>, qui reçoit le site web produit par <strong>pkgdown</strong>.
Elle est commentée tant que la production du site est réalisée localement, mais décommentée si elle est confiée à GitHub Actions (voir section suivante).</p>
</div>
<div id="sec:package-ci5" class="section level2">
<h2><span class="header-section-number">5.9</span> Intégration continue</h2>
<p>La vérification (<em>Check</em>) du package doit être effectuée à chaque étape du développement, ce qui consomme un temps considérable.
Elle peut être automatisée très simplement avec le service GitHub Actions, déclenché à chaque modification du dépôt sur GitHub.
L’analyse de la couverture du code par les tests (quelles parties du codes sont testées ou non) sera ajoutée.</p>
<p>GitHub est également capable de reconstruire la documentation du package avec <strong>pkgdown</strong>, autre opération consommatrice de ressources, après la réussite des tests.</p>
<p>La section <a href="chap-ci.html#sec:package-ci6">6.3.5</a> détaille le moyen de le faire.</p>
</div>
<div id="sec:package-cran" class="section level2">
<h2><span class="header-section-number">5.10</span> CRAN</h2>
<p>Les packages dont l’audience dépasse l’entourage de l’auteur peuvent être déposés sur CRAN.
Les règles à respecter sur CRAN sont nombreuses<a href="#fn91" class="footnote-ref" id="fnref91"><sup>91</sup></a>. Elles sont vérifiées par la commande de vérification <code>R CMD check</code> avec l’option <code>-- as.cran</code>.
La vérification ne doit renvoyer aucune erreur, aucun avertissement, ni aucune note avant de soumettre le package.</p>
<div id="test-du-package" class="section level3">
<h3><span class="header-section-number">5.10.1</span> Test du package</h3>
<p>La vérification du package par GitHub dans le cadre de l’intégration continue n’est pas suffisante.
Le package doit être testé sur la version de développement de R.
Le site <em>R-hub builder</em><a href="#fn92" class="footnote-ref" id="fnref92"><sup>92</sup></a> permet de le faire simplement.</p>
<p>Le package, dont la version ne doit pas être de développement (limitée à trois nombres, voir section <a href="chap-package.html#sec:package-description">5.2.1</a>), doit être construit au format source: dans la fenêtre <em>Build</em> de RStudio, cliquer sur “More &gt; Build Source Package”.
Sur le site <em>R-hub builder</em>, cliquer sur <em>Advanced</em>, sélectionner le fichier source du package et la plateforme de test: <em>Debian Linux, R-devel, GCC</em>.</p>
</div>
<div id="soumission" class="section level3">
<h3><span class="header-section-number">5.10.2</span> Soumission</h3>
<p>Quand le package est au point, la soumission à CRAN se fait par le site web dédié<a href="#fn93" class="footnote-ref" id="fnref93"><sup>93</sup></a>.</p>
<p>En cas de rejet, traiter les demandes et soumettre à nouveau en incrémentant le numéro de version.</p>
</div>
<div id="maintenance" class="section level3">
<h3><span class="header-section-number">5.10.3</span> Maintenance</h3>
<p>Des demandes de corrections sont envoyées par CRAN de temps à autre, notamment lors des changements de version de R.
L’adresse de messagerie du responsable du package (<em>maintainer</em>) doit rester valide et les demandes doivent être traitées rapidement.
Dans le cas contraire, le package est archivé.</p>
<p>Les nouvelles versions du package sont soumises de la même façon que la première.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Wickham2015">
<p>Wickham, Hadley. 2015. <em>R Packages</em>. 1st éd. O’Reilly Media, Inc.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="82">
<li id="fn82"><p><a href="https://cran.r-project.org/web/packages/policies.html" class="uri">https://cran.r-project.org/web/packages/policies.html</a><a href="chap-package.html#fnref82" class="footnote-back">↩︎</a></p></li>
<li id="fn83"><p><a href="https://thinkr.fr/creer-package-r-quelques-minutes/" class="uri">https://thinkr.fr/creer-package-r-quelques-minutes/</a><a href="chap-package.html#fnref83" class="footnote-back">↩︎</a></p></li>
<li id="fn84"><p><a href="https://roxygen2.r-lib.org/articles/markdown.html" class="uri">https://roxygen2.r-lib.org/articles/markdown.html</a><a href="chap-package.html#fnref84" class="footnote-back">↩︎</a></p></li>
<li id="fn85"><p><a href="https://svn.r-project.org/R/trunk/share/licenses/license.db" class="uri">https://svn.r-project.org/R/trunk/share/licenses/license.db</a><a href="chap-package.html#fnref85" class="footnote-back">↩︎</a></p></li>
<li id="fn86"><p><a href="https://r-pkgs.org/description.html#description-license" class="uri">https://r-pkgs.org/description.html#description-license</a><a href="chap-package.html#fnref86" class="footnote-back">↩︎</a></p></li>
<li id="fn87"><p>Exemple: <a href="https://EricMarcon.github.io/entropart/" class="uri">https://EricMarcon.github.io/entropart/</a><a href="chap-package.html#fnref87" class="footnote-back">↩︎</a></p></li>
<li id="fn88"><p>L’application Shiny <strong>hexmake</strong> permet de créer facilement un sticker: <a href="https://connect.thinkr.fr/hexmake/" class="uri">https://connect.thinkr.fr/hexmake/</a><a href="chap-package.html#fnref88" class="footnote-back">↩︎</a></p></li>
<li id="fn89"><p><a href="https://r-pkgs.org/release.html?q=readme#readme-rmd" class="uri">https://r-pkgs.org/release.html?q=readme#readme-rmd</a><a href="chap-package.html#fnref89" class="footnote-back">↩︎</a></p></li>
<li id="fn90"><p>Package <strong>SpatDiv</strong> sur GitHub: <a href="https://github.com/EricMarcon/SpatDiv/blob/master/R/package.R" class="uri">https://github.com/EricMarcon/SpatDiv/blob/master/R/package.R</a><a href="chap-package.html#fnref90" class="footnote-back">↩︎</a></p></li>
<li id="fn91"><p><a href="https://cran.r-project.org/web/packages/policies.html" class="uri">https://cran.r-project.org/web/packages/policies.html</a><a href="chap-package.html#fnref91" class="footnote-back">↩︎</a></p></li>
<li id="fn92"><p><a href="https://builder.r-hub.io/" class="uri">https://builder.r-hub.io/</a><a href="chap-package.html#fnref92" class="footnote-back">↩︎</a></p></li>
<li id="fn93"><p><a href="https://xmpalantir.wu.ac.at/cransubmit/" class="uri">https://xmpalantir.wu.ac.at/cransubmit/</a><a href="chap-package.html#fnref93" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-rediger.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-ci.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["travailleR.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
